<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Danny Cam Hoa Tien">
<meta name="dcterms.date" content="2023-05-23">
<title>MyLabJournal - Challenge4</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../assets/icons/favicon.svg" rel="icon" type="image/svg+xml">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link href="../../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">MyLabJournal</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-journal" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Journal</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-journal">
<li>
    <a class="dropdown-item" href="../../../content/01_journal/01_tidyverse.html">
 <span class="dropdown-text">01 Tidyverse</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/01_journal/02_data_acquisition.html">
 <span class="dropdown-text">02 Data Acquisition</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/01_journal/03_data_wrangling.html">
 <span class="dropdown-text">03 Data Wrangling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/01_journal/04_data_visualization.html">
 <span class="dropdown-text">04 Data Visualization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/01_journal/Challenge1/05_Machine_Learning_Fundamentals.html">
 <span class="dropdown-text">05 Machine Learning Fundamentals</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="../../../content/02_notes/05_class_notes.html">
 <span class="menu-text">Class notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../content/03_other/06_links.html">
 <span class="menu-text">Links</span></a>
  </li>  
</ul>
<div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul class="collapse">
<li><a href="#r-markdown" id="toc-r-markdown" class="nav-link active" data-scroll-target="#r-markdown"><span class="toc-section-number">0.1</span>  R Markdown</a></li>
  <li><a href="#data-preparation--" id="toc-data-preparation--" class="nav-link" data-scroll-target="#data-preparation--"><span class="toc-section-number">1</span>  Data preparation —-</a></li>
  <li><a href="#human-readable" id="toc-human-readable" class="nav-link" data-scroll-target="#human-readable"><span class="toc-section-number">2</span>  Human readable</a></li>
  <li><a href="#data-preparation---1" id="toc-data-preparation---1" class="nav-link" data-scroll-target="#data-preparation---1"><span class="toc-section-number">3</span>  DATA PREPARATION —-</a></li>
  <li><a href="#human-readable--" id="toc-human-readable--" class="nav-link" data-scroll-target="#human-readable--"><span class="toc-section-number">4</span>  Human readable —-</a></li>
  <li><a href="#rename-columns" id="toc-rename-columns" class="nav-link" data-scroll-target="#rename-columns"><span class="toc-section-number">5</span>  Rename columns</a></li>
  <li><a href="#return-only-unique-values-of-businesstravel" id="toc-return-only-unique-values-of-businesstravel" class="nav-link" data-scroll-target="#return-only-unique-values-of-businesstravel"><span class="toc-section-number">6</span>  Return only unique values of BusinessTravel</a></li>
  <li><a href="#data-preparation---2" id="toc-data-preparation---2" class="nav-link" data-scroll-target="#data-preparation---2"><span class="toc-section-number">7</span>  DATA PREPARATION —-</a></li>
  <li><a href="#machine-readable--" id="toc-machine-readable--" class="nav-link" data-scroll-target="#machine-readable--"><span class="toc-section-number">8</span>  Machine readable —-</a></li>
  <li><a href="#plot-faceted-histgoram-function" id="toc-plot-faceted-histgoram-function" class="nav-link" data-scroll-target="#plot-faceted-histgoram-function"><span class="toc-section-number">9</span>  Plot Faceted Histgoram function</a></li>
  <li><a href="#data-preprocessing-with-recipes--" id="toc-data-preprocessing-with-recipes--" class="nav-link" data-scroll-target="#data-preprocessing-with-recipes--"><span class="toc-section-number">10</span>  Data Preprocessing With Recipes —-</a></li>
  <li><a href="#center-and-scale" id="toc-center-and-scale" class="nav-link" data-scroll-target="#center-and-scale"><span class="toc-section-number">11</span>  3. Center and scale</a></li>
  <li><a href="#correlation-evaluation--" id="toc-correlation-evaluation--" class="nav-link" data-scroll-target="#correlation-evaluation--"><span class="toc-section-number">12</span>  Correlation Evaluation —-</a></li>
  <li><a href="#modeling" id="toc-modeling" class="nav-link" data-scroll-target="#modeling"><span class="toc-section-number">13</span>  Modeling</a></li>
  <li><a href="#depending-on-the-algorithm-the-output-will-be-different" id="toc-depending-on-the-algorithm-the-output-will-be-different" class="nav-link" data-scroll-target="#depending-on-the-algorithm-the-output-will-be-different"><span class="toc-section-number">14</span>  Depending on the algorithm, the output will be different</a></li>
  <li><a href="#run-automl-specifying-the-stopping-criterion" id="toc-run-automl-specifying-the-stopping-criterion" class="nav-link" data-scroll-target="#run-automl-specifying-the-stopping-criterion"><span class="toc-section-number">15</span>  3. Run AutoML specifying the stopping criterion</a></li>
  <li><a href="#view-the-leaderboard" id="toc-view-the-leaderboard" class="nav-link" data-scroll-target="#view-the-leaderboard"><span class="toc-section-number">16</span>  4. View the leaderboard</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Challenge4</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Danny Cam Hoa Tien </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 23, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header><section id="r-markdown" class="level2" data-number="0.1"><h2 data-number="0.1" class="anchored" data-anchor-id="r-markdown">
<span class="header-section-number">0.1</span> R Markdown</h2>
<p>This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <a href="http://rmarkdown.rstudio.com" class="uri">http://rmarkdown.rstudio.com</a>.</p>
<p>When you click the <strong>Knit</strong> button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:</p>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-1_de8c510d1f138c217f31d2883a13eaee">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
#&gt; ✔ dplyr     1.1.2     ✔ readr     2.1.4
#&gt; ✔ forcats   1.0.0     ✔ stringr   1.5.0
#&gt; ✔ ggplot2   3.4.2     ✔ tibble    3.2.1
#&gt; ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
#&gt; ✔ purrr     1.0.1     
#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
#&gt; ✖ dplyr::filter() masks stats::filter()
#&gt; ✖ dplyr::lag()    masks stats::lag()
#&gt; ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co"># libraries</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="fu">library</span>(rsample)</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="fu">library</span>(recipes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; 
#&gt; Attache Paket: 'recipes'
#&gt; 
#&gt; Das folgende Objekt ist maskiert 'package:stringr':
#&gt; 
#&gt;     fixed
#&gt; 
#&gt; Das folgende Objekt ist maskiert 'package:stats':
#&gt; 
#&gt;     step</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">library</span>(PerformanceAnalytics)  <span class="co"># for skewness </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Lade nötiges Paket: xts
#&gt; Lade nötiges Paket: zoo
#&gt; 
#&gt; Attache Paket: 'zoo'
#&gt; 
#&gt; Die folgenden Objekte sind maskiert von 'package:base':
#&gt; 
#&gt;     as.Date, as.Date.numeric
#&gt; 
#&gt; 
#&gt; ######################### Warning from 'xts' package ##########################
#&gt; #                                                                             #
#&gt; # The dplyr lag() function breaks how base R's lag() function is supposed to  #
#&gt; # work, which breaks lag(my_xts). Calls to lag(my_xts) that you type or       #
#&gt; # source() into this session won't work correctly.                            #
#&gt; #                                                                             #
#&gt; # Use stats::lag() to make sure you're not using dplyr::lag(), or you can add #
#&gt; # conflictRules('dplyr', exclude = 'lag') to your .Rprofile to stop           #
#&gt; # dplyr from breaking base R's lag() function.                                #
#&gt; #                                                                             #
#&gt; # Code in packages is not affected. It's protected by R's namespace mechanism #
#&gt; # Set `options(xts.warn_dplyr_breaks_lag = FALSE)` to suppress this warning.  #
#&gt; #                                                                             #
#&gt; ###############################################################################
#&gt; 
#&gt; Attache Paket: 'xts'
#&gt; 
#&gt; Die folgenden Objekte sind maskiert von 'package:dplyr':
#&gt; 
#&gt;     first, last
#&gt; 
#&gt; 
#&gt; Attache Paket: 'PerformanceAnalytics'
#&gt; 
#&gt; Das folgende Objekt ist maskiert 'package:graphics':
#&gt; 
#&gt;     legend</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># H2O modeling</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="fu">library</span>(h2o)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; 
#&gt; ----------------------------------------------------------------------
#&gt; 
#&gt; Your next step is to start H2O:
#&gt;     &gt; h2o.init()
#&gt; 
#&gt; For H2O package documentation, ask for help:
#&gt;     &gt; ??h2o
#&gt; 
#&gt; After starting H2O, you can use the Web UI at http://localhost:54321
#&gt; For more information visit https://docs.h2o.ai
#&gt; 
#&gt; ----------------------------------------------------------------------
#&gt; 
#&gt; 
#&gt; Attache Paket: 'h2o'
#&gt; 
#&gt; Die folgenden Objekte sind maskiert von 'package:lubridate':
#&gt; 
#&gt;     day, hour, month, week, year
#&gt; 
#&gt; Die folgenden Objekte sind maskiert von 'package:stats':
#&gt; 
#&gt;     cor, sd, var
#&gt; 
#&gt; Die folgenden Objekte sind maskiert von 'package:base':
#&gt; 
#&gt;     %*%, %in%, &amp;&amp;, ||, apply, as.factor, as.numeric, colnames,
#&gt;     colnames&lt;-, ifelse, is.character, is.factor, is.numeric, log,
#&gt;     log10, log1p, log2, round, signif, trunc</code></pre>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-2_119a28977b89285cf6e81c8fd7f209d8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># Load data</span></span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a>employee_attrition_tbl <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"datasets-1067-1925-WA_Fn-UseC_-HR-Employee-Attrition.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Rows: 1470 Columns: 35
#&gt; ── Column specification ────────────────────────────────────────────────────────
#&gt; Delimiter: ","
#&gt; chr  (9): Attrition, BusinessTravel, Department, EducationField, Gender, Job...
#&gt; dbl (26): Age, DailyRate, DistanceFromHome, Education, EmployeeCount, Employ...
#&gt; 
#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.
#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>definitions_raw_tbl    <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data_definitions.xlsx"</span>, <span class="at">sheet =</span> <span class="dv">1</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; New names:
#&gt; • `` -&gt; `...1`
#&gt; • `` -&gt; `...2`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">View</span>(definitions_raw_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-3_9a1349a18b0b374b287c35b40dff5fe2">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>employee_attrition_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2"></a>        <span class="fu">ggplot</span>(<span class="fu">aes</span>(Education)) <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>        <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-3-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="Challenge4_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="data-preparation--" class="level1" data-number="1"><h1 data-number="1">
<span class="header-section-number">1</span> Data preparation —-</h1>
</section><section id="human-readable" class="level1" data-number="2"><h1 data-number="2">
<span class="header-section-number">2</span> Human readable</h1>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-4_82e513beaa1bb5ad8fb81ed5983c6b7b">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>definitions_tbl <span class="ot">&lt;-</span> definitions_raw_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">fill</span>(...<span class="dv">1</span>, <span class="at">.direction =</span> <span class="st">"down"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(...<span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>  <span class="fu">separate</span>(...<span class="dv">2</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"key"</span>, <span class="st">"value"</span>), <span class="at">sep =</span> <span class="st">" '"</span>, <span class="at">remove =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5"></a>  <span class="fu">rename</span>(<span class="at">column_name =</span> ...<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-6"><a href="#cb15-6"></a>  <span class="fu">mutate</span>(<span class="at">key =</span> <span class="fu">as.numeric</span>(key)) <span class="sc">%&gt;%</span></span>
<span id="cb15-7"><a href="#cb15-7"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> value <span class="sc">%&gt;%</span> <span class="fu">str_replace</span>(<span class="at">pattern =</span> <span class="st">"'"</span>, <span class="at">replacement =</span> <span class="st">""</span>)) </span>
<span id="cb15-8"><a href="#cb15-8"></a>definitions_tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["column_name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["key"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["value"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"Education","2":"1","3":"Below College"},{"1":"Education","2":"2","3":"College"},{"1":"Education","2":"3","3":"Bachelor"},{"1":"Education","2":"4","3":"Master"},{"1":"Education","2":"5","3":"Doctor"},{"1":"EnvironmentSatisfaction","2":"1","3":"Low"},{"1":"EnvironmentSatisfaction","2":"2","3":"Medium"},{"1":"EnvironmentSatisfaction","2":"3","3":"High"},{"1":"EnvironmentSatisfaction","2":"4","3":"Very High"},{"1":"JobInvolvement","2":"1","3":"Low"},{"1":"JobInvolvement","2":"2","3":"Medium"},{"1":"JobInvolvement","2":"3","3":"High"},{"1":"JobInvolvement","2":"4","3":"Very High"},{"1":"JobSatisfaction","2":"1","3":"Low"},{"1":"JobSatisfaction","2":"2","3":"Medium"},{"1":"JobSatisfaction","2":"3","3":"High"},{"1":"JobSatisfaction","2":"4","3":"Very High"},{"1":"PerformanceRating","2":"1","3":"Low"},{"1":"PerformanceRating","2":"2","3":"Good"},{"1":"PerformanceRating","2":"3","3":"Excellent"},{"1":"PerformanceRating","2":"4","3":"Outstanding"},{"1":"RelationshipSatisfaction","2":"1","3":"Low"},{"1":"RelationshipSatisfaction","2":"2","3":"Medium"},{"1":"RelationshipSatisfaction","2":"3","3":"High"},{"1":"RelationshipSatisfaction","2":"4","3":"Very High"},{"1":"WorkLifeBalance","2":"1","3":"Bad"},{"1":"WorkLifeBalance","2":"2","3":"Good"},{"1":"WorkLifeBalance","2":"3","3":"Better"},{"1":"WorkLifeBalance","2":"4","3":"Best"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="data-preparation---1" class="level1" data-number="3"><h1 data-number="3">
<span class="header-section-number">3</span> DATA PREPARATION —-</h1>
</section><section id="human-readable--" class="level1" data-number="4"><h1 data-number="4">
<span class="header-section-number">4</span> Human readable —-</h1>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-5_4a49020c024235ee0dd3c7dbf5182f55">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>definitions_list <span class="ot">&lt;-</span> definitions_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2"></a>  </span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="co"># Mapping over lists</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>  </span>
<span id="cb16-5"><a href="#cb16-5"></a>  <span class="co"># Split into multiple tibbles</span></span>
<span id="cb16-6"><a href="#cb16-6"></a>  <span class="fu">split</span>(.<span class="sc">$</span>column_name) <span class="sc">%&gt;%</span></span>
<span id="cb16-7"><a href="#cb16-7"></a>  <span class="co"># Remove column_name</span></span>
<span id="cb16-8"><a href="#cb16-8"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">select</span>(., <span class="sc">-</span>column_name)) <span class="sc">%&gt;%</span></span>
<span id="cb16-9"><a href="#cb16-9"></a>  <span class="co"># Convert to factors because they are ordered an we want to maintain that order</span></span>
<span id="cb16-10"><a href="#cb16-10"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">mutate</span>(., <span class="at">value =</span> <span class="fu">as_factor</span>(value))) </span>
<span id="cb16-11"><a href="#cb16-11"></a>  </span>
<span id="cb16-12"><a href="#cb16-12"></a><span class="co"># definitions_list[[1]]</span></span>
<span id="cb16-13"><a href="#cb16-13"></a>definitions_list[[<span class="st">"Education"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["key"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["value"],"name":[2],"type":["fct"],"align":["left"]}],"data":[{"1":"1","2":"Below College"},{"1":"2","2":"College"},{"1":"3","2":"Bachelor"},{"1":"4","2":"Master"},{"1":"5","2":"Doctor"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="rename-columns" class="level1" data-number="5"><h1 data-number="5">
<span class="header-section-number">5</span> Rename columns</h1>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-6_fc8fe79dda7a1a3dd85f4a3c973d6c01">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(definitions_list)) {</span>
<span id="cb17-2"><a href="#cb17-2"></a>  list_name <span class="ot">&lt;-</span> <span class="fu">names</span>(definitions_list)[i]</span>
<span id="cb17-3"><a href="#cb17-3"></a>  <span class="fu">colnames</span>(definitions_list[[i]]) <span class="ot">&lt;-</span> <span class="fu">c</span>(list_name, <span class="fu">paste0</span>(list_name, <span class="st">"_value"</span>))</span>
<span id="cb17-4"><a href="#cb17-4"></a>}</span>
<span id="cb17-5"><a href="#cb17-5"></a></span>
<span id="cb17-6"><a href="#cb17-6"></a>definitions_list[[<span class="st">"Education"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Education"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Education_value"],"name":[2],"type":["fct"],"align":["left"]}],"data":[{"1":"1","2":"Below College"},{"1":"2","2":"College"},{"1":"3","2":"Bachelor"},{"1":"4","2":"Master"},{"1":"5","2":"Doctor"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-7_5266a1c0a68eb89d1af261ad443a2c07">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>data_merged_tbl <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">HR_Data =</span> employee_attrition_tbl) <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>    </span>
<span id="cb18-3"><a href="#cb18-3"></a>        <span class="co"># Join everything</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>        <span class="fu">append</span>(definitions_list, <span class="at">after =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="#cb18-5"></a>        <span class="fu">reduce</span>(left_join) <span class="sc">%&gt;%</span></span>
<span id="cb18-6"><a href="#cb18-6"></a>        </span>
<span id="cb18-7"><a href="#cb18-7"></a>        <span class="co"># Remove unnecessary columns</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>        <span class="fu">select</span>(<span class="sc">-</span><span class="fu">one_of</span>(<span class="fu">names</span>(definitions_list))) <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="#cb18-9"></a>        </span>
<span id="cb18-10"><a href="#cb18-10"></a>        <span class="co"># Format the "_value"</span></span>
<span id="cb18-11"><a href="#cb18-11"></a>        <span class="fu">set_names</span>(<span class="fu">str_replace_all</span>(<span class="fu">names</span>(.), <span class="at">pattern =</span> <span class="st">"_value"</span>, <span class="at">replacement =</span> <span class="st">""</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-12"><a href="#cb18-12"></a>        </span>
<span id="cb18-13"><a href="#cb18-13"></a>        <span class="co"># Resort</span></span>
<span id="cb18-14"><a href="#cb18-14"></a>        <span class="fu">select</span>(<span class="fu">sort</span>(<span class="fu">names</span>(.))) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Joining with `by = join_by(Education)`
#&gt; Joining with `by = join_by(EnvironmentSatisfaction)`
#&gt; Joining with `by = join_by(JobInvolvement)`
#&gt; Joining with `by = join_by(JobSatisfaction)`
#&gt; Joining with `by = join_by(PerformanceRating)`
#&gt; Joining with `by = join_by(RelationshipSatisfaction)`
#&gt; Joining with `by = join_by(WorkLifeBalance)`</code></pre>
</div>
</div>
</section><section id="return-only-unique-values-of-businesstravel" class="level1" data-number="6"><h1 data-number="6">
<span class="header-section-number">6</span> Return only unique values of BusinessTravel</h1>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-8_3d183d2f14afbc5ca5ca501e122defb4">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>data_merged_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">distinct</span>(BusinessTravel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["BusinessTravel"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"Travel_Rarely"},{"1":"Travel_Frequently"},{"1":"Non-Travel"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>#Mutate To Factors</p>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-9_a91d8e76a367803b2b70e4396916f022">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>data_merged_tbl <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>        <span class="fu">mutate_if</span>(is.character, as.factor) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>        <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Rows: 1,470
#&gt; Columns: 35
#&gt; $ Age                      &lt;dbl&gt; 41, 49, 37, 33, 27, 32, 59, 30, 38, 36, 35, 2…
#&gt; $ Attrition                &lt;fct&gt; Yes, No, Yes, No, No, No, No, No, No, No, No,…
#&gt; $ BusinessTravel           &lt;fct&gt; Travel_Rarely, Travel_Frequently, Travel_Rare…
#&gt; $ DailyRate                &lt;dbl&gt; 1102, 279, 1373, 1392, 591, 1005, 1324, 1358,…
#&gt; $ Department               &lt;fct&gt; Sales, Research &amp; Development, Research &amp; Dev…
#&gt; $ DistanceFromHome         &lt;dbl&gt; 1, 8, 2, 3, 2, 2, 3, 24, 23, 27, 16, 15, 26, …
#&gt; $ Education                &lt;fct&gt; College, Below College, College, Master, Belo…
#&gt; $ EducationField           &lt;fct&gt; Life Sciences, Life Sciences, Other, Life Sci…
#&gt; $ EmployeeCount            &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
#&gt; $ EmployeeNumber           &lt;dbl&gt; 1, 2, 4, 5, 7, 8, 10, 11, 12, 13, 14, 15, 16,…
#&gt; $ EnvironmentSatisfaction  &lt;fct&gt; Medium, High, Very High, Very High, Low, Very…
#&gt; $ Gender                   &lt;fct&gt; Female, Male, Male, Female, Male, Male, Femal…
#&gt; $ HourlyRate               &lt;dbl&gt; 94, 61, 92, 56, 40, 79, 81, 67, 44, 94, 84, 4…
#&gt; $ JobInvolvement           &lt;fct&gt; High, Medium, Medium, High, High, High, Very …
#&gt; $ JobLevel                 &lt;dbl&gt; 2, 2, 1, 1, 1, 1, 1, 1, 3, 2, 1, 2, 1, 1, 1, …
#&gt; $ JobRole                  &lt;fct&gt; Sales Executive, Research Scientist, Laborato…
#&gt; $ JobSatisfaction          &lt;fct&gt; Very High, Medium, High, High, Medium, Very H…
#&gt; $ MaritalStatus            &lt;fct&gt; Single, Married, Single, Married, Married, Si…
#&gt; $ MonthlyIncome            &lt;dbl&gt; 5993, 5130, 2090, 2909, 3468, 3068, 2670, 269…
#&gt; $ MonthlyRate              &lt;dbl&gt; 19479, 24907, 2396, 23159, 16632, 11864, 9964…
#&gt; $ NumCompaniesWorked       &lt;dbl&gt; 8, 1, 6, 1, 9, 0, 4, 1, 0, 6, 0, 0, 1, 0, 5, …
#&gt; $ Over18                   &lt;fct&gt; Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, …
#&gt; $ OverTime                 &lt;fct&gt; Yes, No, Yes, Yes, No, No, Yes, No, No, No, N…
#&gt; $ PercentSalaryHike        &lt;dbl&gt; 11, 23, 15, 11, 12, 13, 20, 22, 21, 13, 13, 1…
#&gt; $ PerformanceRating        &lt;fct&gt; Excellent, Outstanding, Excellent, Excellent,…
#&gt; $ RelationshipSatisfaction &lt;fct&gt; Low, Very High, Medium, High, Very High, High…
#&gt; $ StandardHours            &lt;dbl&gt; 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 8…
#&gt; $ StockOptionLevel         &lt;dbl&gt; 0, 1, 0, 0, 1, 0, 3, 1, 0, 2, 1, 0, 1, 1, 0, …
#&gt; $ TotalWorkingYears        &lt;dbl&gt; 8, 10, 7, 8, 6, 8, 12, 1, 10, 17, 6, 10, 5, 3…
#&gt; $ TrainingTimesLastYear    &lt;dbl&gt; 0, 3, 3, 3, 3, 2, 3, 2, 2, 3, 5, 3, 1, 2, 4, …
#&gt; $ WorkLifeBalance          &lt;fct&gt; Bad, Better, Better, Better, Better, Good, Go…
#&gt; $ YearsAtCompany           &lt;dbl&gt; 6, 10, 0, 8, 2, 7, 1, 1, 9, 7, 5, 9, 5, 2, 4,…
#&gt; $ YearsInCurrentRole       &lt;dbl&gt; 4, 7, 0, 7, 2, 7, 0, 0, 7, 7, 4, 5, 2, 2, 2, …
#&gt; $ YearsSinceLastPromotion  &lt;dbl&gt; 0, 1, 0, 3, 2, 3, 0, 0, 1, 7, 0, 0, 4, 1, 0, …
#&gt; $ YearsWithCurrManager     &lt;dbl&gt; 5, 7, 0, 0, 2, 6, 0, 0, 8, 7, 3, 8, 3, 2, 3, …</code></pre>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-10_aca31ee6df0c7c29d04ea89acd20b740">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>data_merged_tbl <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>        <span class="fu">mutate_if</span>(is.character, as.factor) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>        <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>        <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Rows: 1,470
#&gt; Columns: 16
#&gt; $ Attrition                &lt;fct&gt; Yes, No, Yes, No, No, No, No, No, No, No, No,…
#&gt; $ BusinessTravel           &lt;fct&gt; Travel_Rarely, Travel_Frequently, Travel_Rare…
#&gt; $ Department               &lt;fct&gt; Sales, Research &amp; Development, Research &amp; Dev…
#&gt; $ Education                &lt;fct&gt; College, Below College, College, Master, Belo…
#&gt; $ EducationField           &lt;fct&gt; Life Sciences, Life Sciences, Other, Life Sci…
#&gt; $ EnvironmentSatisfaction  &lt;fct&gt; Medium, High, Very High, Very High, Low, Very…
#&gt; $ Gender                   &lt;fct&gt; Female, Male, Male, Female, Male, Male, Femal…
#&gt; $ JobInvolvement           &lt;fct&gt; High, Medium, Medium, High, High, High, Very …
#&gt; $ JobRole                  &lt;fct&gt; Sales Executive, Research Scientist, Laborato…
#&gt; $ JobSatisfaction          &lt;fct&gt; Very High, Medium, High, High, Medium, Very H…
#&gt; $ MaritalStatus            &lt;fct&gt; Single, Married, Single, Married, Married, Si…
#&gt; $ Over18                   &lt;fct&gt; Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, …
#&gt; $ OverTime                 &lt;fct&gt; Yes, No, Yes, Yes, No, No, Yes, No, No, No, N…
#&gt; $ PerformanceRating        &lt;fct&gt; Excellent, Outstanding, Excellent, Excellent,…
#&gt; $ RelationshipSatisfaction &lt;fct&gt; Low, Very High, Medium, High, Very High, High…
#&gt; $ WorkLifeBalance          &lt;fct&gt; Bad, Better, Better, Better, Better, Good, Go…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>data_merged_tbl <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>        <span class="fu">mutate_if</span>(is.character, as.factor) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3"></a>        <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4"></a>        <span class="fu">map</span>(levels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; $Attrition
#&gt; [1] "No"  "Yes"
#&gt; 
#&gt; $BusinessTravel
#&gt; [1] "Non-Travel"        "Travel_Frequently" "Travel_Rarely"    
#&gt; 
#&gt; $Department
#&gt; [1] "Human Resources"        "Research &amp; Development" "Sales"                 
#&gt; 
#&gt; $Education
#&gt; [1] "Below College" "College"       "Bachelor"      "Master"       
#&gt; [5] "Doctor"       
#&gt; 
#&gt; $EducationField
#&gt; [1] "Human Resources"  "Life Sciences"    "Marketing"        "Medical"         
#&gt; [5] "Other"            "Technical Degree"
#&gt; 
#&gt; $EnvironmentSatisfaction
#&gt; [1] "Low"       "Medium"    "High"      "Very High"
#&gt; 
#&gt; $Gender
#&gt; [1] "Female" "Male"  
#&gt; 
#&gt; $JobInvolvement
#&gt; [1] "Low"       "Medium"    "High"      "Very High"
#&gt; 
#&gt; $JobRole
#&gt; [1] "Healthcare Representative" "Human Resources"          
#&gt; [3] "Laboratory Technician"     "Manager"                  
#&gt; [5] "Manufacturing Director"    "Research Director"        
#&gt; [7] "Research Scientist"        "Sales Executive"          
#&gt; [9] "Sales Representative"     
#&gt; 
#&gt; $JobSatisfaction
#&gt; [1] "Low"       "Medium"    "High"      "Very High"
#&gt; 
#&gt; $MaritalStatus
#&gt; [1] "Divorced" "Married"  "Single"  
#&gt; 
#&gt; $Over18
#&gt; [1] "Y"
#&gt; 
#&gt; $OverTime
#&gt; [1] "No"  "Yes"
#&gt; 
#&gt; $PerformanceRating
#&gt; [1] "Low"         "Good"        "Excellent"   "Outstanding"
#&gt; 
#&gt; $RelationshipSatisfaction
#&gt; [1] "Low"       "Medium"    "High"      "Very High"
#&gt; 
#&gt; $WorkLifeBalance
#&gt; [1] "Bad"    "Good"   "Better" "Best"</code></pre>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-11_d4231acb2affefc8523012fab50a979f">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>data_processed_tbl <span class="ot">&lt;-</span> data_merged_tbl <span class="sc">%&gt;%</span>        </span>
<span id="cb27-2"><a href="#cb27-2"></a>        <span class="fu">mutate_if</span>(is.character, as.factor) <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3"></a>        <span class="fu">mutate</span>(</span>
<span id="cb27-4"><a href="#cb27-4"></a>            <span class="at">BusinessTravel =</span> BusinessTravel <span class="sc">%&gt;%</span> <span class="fu">fct_relevel</span>(<span class="st">"Non-Travel"</span>, </span>
<span id="cb27-5"><a href="#cb27-5"></a>                                                            <span class="st">"Travel_Rarely"</span>, </span>
<span id="cb27-6"><a href="#cb27-6"></a>                                                            <span class="st">"Travel_Frequently"</span>),</span>
<span id="cb27-7"><a href="#cb27-7"></a>            <span class="at">MaritalStatus  =</span> MaritalStatus <span class="sc">%&gt;%</span> <span class="fu">fct_relevel</span>(<span class="st">"Single"</span>, </span>
<span id="cb27-8"><a href="#cb27-8"></a>                                                           <span class="st">"Married"</span>, </span>
<span id="cb27-9"><a href="#cb27-9"></a>                                                           <span class="st">"Divorced"</span>)</span>
<span id="cb27-10"><a href="#cb27-10"></a>        )</span>
<span id="cb27-11"><a href="#cb27-11"></a>        </span>
<span id="cb27-12"><a href="#cb27-12"></a>data_processed_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb27-13"><a href="#cb27-13"></a>  <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span> </span>
<span id="cb27-14"><a href="#cb27-14"></a>  <span class="fu">map</span>(levels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; $Attrition
#&gt; [1] "No"  "Yes"
#&gt; 
#&gt; $BusinessTravel
#&gt; [1] "Non-Travel"        "Travel_Rarely"     "Travel_Frequently"
#&gt; 
#&gt; $Department
#&gt; [1] "Human Resources"        "Research &amp; Development" "Sales"                 
#&gt; 
#&gt; $Education
#&gt; [1] "Below College" "College"       "Bachelor"      "Master"       
#&gt; [5] "Doctor"       
#&gt; 
#&gt; $EducationField
#&gt; [1] "Human Resources"  "Life Sciences"    "Marketing"        "Medical"         
#&gt; [5] "Other"            "Technical Degree"
#&gt; 
#&gt; $EnvironmentSatisfaction
#&gt; [1] "Low"       "Medium"    "High"      "Very High"
#&gt; 
#&gt; $Gender
#&gt; [1] "Female" "Male"  
#&gt; 
#&gt; $JobInvolvement
#&gt; [1] "Low"       "Medium"    "High"      "Very High"
#&gt; 
#&gt; $JobRole
#&gt; [1] "Healthcare Representative" "Human Resources"          
#&gt; [3] "Laboratory Technician"     "Manager"                  
#&gt; [5] "Manufacturing Director"    "Research Director"        
#&gt; [7] "Research Scientist"        "Sales Executive"          
#&gt; [9] "Sales Representative"     
#&gt; 
#&gt; $JobSatisfaction
#&gt; [1] "Low"       "Medium"    "High"      "Very High"
#&gt; 
#&gt; $MaritalStatus
#&gt; [1] "Single"   "Married"  "Divorced"
#&gt; 
#&gt; $Over18
#&gt; [1] "Y"
#&gt; 
#&gt; $OverTime
#&gt; [1] "No"  "Yes"
#&gt; 
#&gt; $PerformanceRating
#&gt; [1] "Low"         "Good"        "Excellent"   "Outstanding"
#&gt; 
#&gt; $RelationshipSatisfaction
#&gt; [1] "Low"       "Medium"    "High"      "Very High"
#&gt; 
#&gt; $WorkLifeBalance
#&gt; [1] "Bad"    "Good"   "Better" "Best"</code></pre>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-12_5f3c61f7e3666f43113bc43f007a66ea">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">source</span>(<span class="st">"process_hr_data_readable.R"</span>)</span>
<span id="cb29-2"><a href="#cb29-2"></a></span>
<span id="cb29-3"><a href="#cb29-3"></a><span class="fu">process_hr_data_readable</span>(employee_attrition_tbl, definitions_raw_tbl) <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Joining with `by = join_by(Education)`
#&gt; Joining with `by = join_by(EnvironmentSatisfaction)`
#&gt; Joining with `by = join_by(JobInvolvement)`
#&gt; Joining with `by = join_by(JobSatisfaction)`
#&gt; Joining with `by = join_by(PerformanceRating)`
#&gt; Joining with `by = join_by(RelationshipSatisfaction)`
#&gt; Joining with `by = join_by(WorkLifeBalance)`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Rows: 1,470
#&gt; Columns: 35
#&gt; $ Age                      &lt;dbl&gt; 41, 49, 37, 33, 27, 32, 59, 30, 38, 36, 35, 2…
#&gt; $ Attrition                &lt;fct&gt; Yes, No, Yes, No, No, No, No, No, No, No, No,…
#&gt; $ BusinessTravel           &lt;fct&gt; Travel_Rarely, Travel_Frequently, Travel_Rare…
#&gt; $ DailyRate                &lt;dbl&gt; 1102, 279, 1373, 1392, 591, 1005, 1324, 1358,…
#&gt; $ Department               &lt;fct&gt; Sales, Research &amp; Development, Research &amp; Dev…
#&gt; $ DistanceFromHome         &lt;dbl&gt; 1, 8, 2, 3, 2, 2, 3, 24, 23, 27, 16, 15, 26, …
#&gt; $ Education                &lt;fct&gt; College, Below College, College, Master, Belo…
#&gt; $ EducationField           &lt;fct&gt; Life Sciences, Life Sciences, Other, Life Sci…
#&gt; $ EmployeeCount            &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
#&gt; $ EmployeeNumber           &lt;dbl&gt; 1, 2, 4, 5, 7, 8, 10, 11, 12, 13, 14, 15, 16,…
#&gt; $ EnvironmentSatisfaction  &lt;fct&gt; Medium, High, Very High, Very High, Low, Very…
#&gt; $ Gender                   &lt;fct&gt; Female, Male, Male, Female, Male, Male, Femal…
#&gt; $ HourlyRate               &lt;dbl&gt; 94, 61, 92, 56, 40, 79, 81, 67, 44, 94, 84, 4…
#&gt; $ JobInvolvement           &lt;fct&gt; High, Medium, Medium, High, High, High, Very …
#&gt; $ JobLevel                 &lt;dbl&gt; 2, 2, 1, 1, 1, 1, 1, 1, 3, 2, 1, 2, 1, 1, 1, …
#&gt; $ JobRole                  &lt;fct&gt; Sales Executive, Research Scientist, Laborato…
#&gt; $ JobSatisfaction          &lt;fct&gt; Very High, Medium, High, High, Medium, Very H…
#&gt; $ MaritalStatus            &lt;fct&gt; Single, Married, Single, Married, Married, Si…
#&gt; $ MonthlyIncome            &lt;dbl&gt; 5993, 5130, 2090, 2909, 3468, 3068, 2670, 269…
#&gt; $ MonthlyRate              &lt;dbl&gt; 19479, 24907, 2396, 23159, 16632, 11864, 9964…
#&gt; $ NumCompaniesWorked       &lt;dbl&gt; 8, 1, 6, 1, 9, 0, 4, 1, 0, 6, 0, 0, 1, 0, 5, …
#&gt; $ Over18                   &lt;fct&gt; Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, …
#&gt; $ OverTime                 &lt;fct&gt; Yes, No, Yes, Yes, No, No, Yes, No, No, No, N…
#&gt; $ PercentSalaryHike        &lt;dbl&gt; 11, 23, 15, 11, 12, 13, 20, 22, 21, 13, 13, 1…
#&gt; $ PerformanceRating        &lt;fct&gt; Excellent, Outstanding, Excellent, Excellent,…
#&gt; $ RelationshipSatisfaction &lt;fct&gt; Low, Very High, Medium, High, Very High, High…
#&gt; $ StandardHours            &lt;dbl&gt; 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 8…
#&gt; $ StockOptionLevel         &lt;dbl&gt; 0, 1, 0, 0, 1, 0, 3, 1, 0, 2, 1, 0, 1, 1, 0, …
#&gt; $ TotalWorkingYears        &lt;dbl&gt; 8, 10, 7, 8, 6, 8, 12, 1, 10, 17, 6, 10, 5, 3…
#&gt; $ TrainingTimesLastYear    &lt;dbl&gt; 0, 3, 3, 3, 3, 2, 3, 2, 2, 3, 5, 3, 1, 2, 4, …
#&gt; $ WorkLifeBalance          &lt;fct&gt; Bad, Better, Better, Better, Better, Good, Go…
#&gt; $ YearsAtCompany           &lt;dbl&gt; 6, 10, 0, 8, 2, 7, 1, 1, 9, 7, 5, 9, 5, 2, 4,…
#&gt; $ YearsInCurrentRole       &lt;dbl&gt; 4, 7, 0, 7, 2, 7, 0, 0, 7, 7, 4, 5, 2, 2, 2, …
#&gt; $ YearsSinceLastPromotion  &lt;dbl&gt; 0, 1, 0, 3, 2, 3, 0, 0, 1, 7, 0, 0, 4, 1, 0, …
#&gt; $ YearsWithCurrManager     &lt;dbl&gt; 5, 7, 0, 0, 2, 6, 0, 0, 8, 7, 3, 8, 3, 2, 3, …</code></pre>
</div>
</div>
</section><section id="data-preparation---2" class="level1" data-number="7"><h1 data-number="7">
<span class="header-section-number">7</span> DATA PREPARATION —-</h1>
</section><section id="machine-readable--" class="level1" data-number="8"><h1 data-number="8">
<span class="header-section-number">8</span> Machine readable —-</h1>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-13_02bc0c08e07bd051041d24e88dff7396">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="co"># Processing pipeline</span></span>
<span id="cb32-2"><a href="#cb32-2"></a></span>
<span id="cb32-3"><a href="#cb32-3"></a>employee_attrition_readable_tbl <span class="ot">&lt;-</span> <span class="fu">process_hr_data_readable</span>(employee_attrition_tbl, definitions_raw_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Joining with `by = join_by(Education)`
#&gt; Joining with `by = join_by(EnvironmentSatisfaction)`
#&gt; Joining with `by = join_by(JobInvolvement)`
#&gt; Joining with `by = join_by(JobSatisfaction)`
#&gt; Joining with `by = join_by(PerformanceRating)`
#&gt; Joining with `by = join_by(RelationshipSatisfaction)`
#&gt; Joining with `by = join_by(WorkLifeBalance)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="co"># Split into test and train</span></span>
<span id="cb34-2"><a href="#cb34-2"></a><span class="fu">set.seed</span>(<span class="at">seed =</span> <span class="dv">1113</span>)</span>
<span id="cb34-3"><a href="#cb34-3"></a>split_obj <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">initial_split</span>(employee_attrition_readable_tbl, <span class="at">prop =</span> <span class="fl">0.85</span>)</span>
<span id="cb34-4"><a href="#cb34-4"></a></span>
<span id="cb34-5"><a href="#cb34-5"></a><span class="co"># Assign training and test data</span></span>
<span id="cb34-6"><a href="#cb34-6"></a>train_readable_tbl <span class="ot">&lt;-</span> <span class="fu">training</span>(split_obj)</span>
<span id="cb34-7"><a href="#cb34-7"></a>test_readable_tbl  <span class="ot">&lt;-</span> <span class="fu">testing</span>(split_obj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="plot-faceted-histgoram-function" class="level1" data-number="9"><h1 data-number="9">
<span class="header-section-number">9</span> Plot Faceted Histgoram function</h1>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-14_1006e40c7833def1472db261b7bbbfee">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">source</span>(<span class="st">"plot_hist_facet.R"</span>)</span>
<span id="cb35-2"><a href="#cb35-2"></a></span>
<span id="cb35-3"><a href="#cb35-3"></a></span>
<span id="cb35-4"><a href="#cb35-4"></a><span class="co"># To create a function and test it, we can assign our data temporarily to data</span></span>
<span id="cb35-5"><a href="#cb35-5"></a>data <span class="ot">&lt;-</span> train_readable_tbl </span>
<span id="cb35-6"><a href="#cb35-6"></a></span>
<span id="cb35-7"><a href="#cb35-7"></a><span class="co"># Example calls</span></span>
<span id="cb35-8"><a href="#cb35-8"></a>train_readable_tbl <span class="sc">%&gt;%</span> <span class="fu">plot_hist_facet</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-14-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="Challenge4_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>train_readable_tbl <span class="sc">%&gt;%</span> <span class="fu">plot_hist_facet</span>(<span class="at">fct_rev =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-14-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="Challenge4_files/figure-html/unnamed-chunk-14-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># Bring attirtion to the top (alt.: select(Attrition, everything()))</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>train_readable_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="#cb37-3"></a>  <span class="fu">relocate</span>(Attrition) <span class="sc">%&gt;%</span> </span>
<span id="cb37-4"><a href="#cb37-4"></a>  <span class="fu">plot_hist_facet</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-14-3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="Challenge4_files/figure-html/unnamed-chunk-14-3.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="data-preprocessing-with-recipes--" class="level1" data-number="10"><h1 data-number="10">
<span class="header-section-number">10</span> Data Preprocessing With Recipes —-</h1>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-15_0da97be64a670c1b74fd68a0753c069d">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="co"># Plan: Correlation Analysis</span></span>
<span id="cb38-2"><a href="#cb38-2"></a></span>
<span id="cb38-3"><a href="#cb38-3"></a><span class="co"># 1. Zero Variance Features ----</span></span>
<span id="cb38-4"><a href="#cb38-4"></a></span>
<span id="cb38-5"><a href="#cb38-5"></a>recipe_obj <span class="ot">&lt;-</span> <span class="fu">recipe</span>(Attrition <span class="sc">~</span> ., <span class="at">data =</span> train_readable_tbl) <span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="#cb38-6"></a>    <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb38-7"><a href="#cb38-7"></a></span>
<span id="cb38-8"><a href="#cb38-8"></a>recipe_obj <span class="sc">%&gt;%</span> </span>
<span id="cb38-9"><a href="#cb38-9"></a>      <span class="fu">prep</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; ── Recipe ──────────────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; ── Inputs</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Number of variables by role</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; outcome:    1
#&gt; predictor: 34</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; ── Training information</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Training data contained 1249 data points and no incomplete rows.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; ── Operations</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; • Zero variance filter removed: EmployeeCount, Over18, StandardHours | Trained</code></pre>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-16_9fc04eefefd6bce1b5b6a6c221383621">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="co"># 2. Transformations ---- (for skewed features)</span></span>
<span id="cb51-2"><a href="#cb51-2"></a></span>
<span id="cb51-3"><a href="#cb51-3"></a></span>
<span id="cb51-4"><a href="#cb51-4"></a>skewed_feature_names <span class="ot">&lt;-</span> train_readable_tbl <span class="sc">%&gt;%</span></span>
<span id="cb51-5"><a href="#cb51-5"></a>    <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span></span>
<span id="cb51-6"><a href="#cb51-6"></a>    <span class="fu">map_df</span>(skewness) <span class="sc">%&gt;%</span></span>
<span id="cb51-7"><a href="#cb51-7"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb51-8"><a href="#cb51-8"></a>                 <span class="at">names_to =</span> <span class="st">"key"</span>,</span>
<span id="cb51-9"><a href="#cb51-9"></a>                 <span class="at">values_to =</span> <span class="st">"value"</span>,</span>
<span id="cb51-10"><a href="#cb51-10"></a>                 <span class="at">names_transform =</span> <span class="fu">list</span>(<span class="at">key =</span> forcats<span class="sc">::</span>fct_inorder)) <span class="sc">%&gt;%</span></span>
<span id="cb51-11"><a href="#cb51-11"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb51-12"><a href="#cb51-12"></a>    </span>
<span id="cb51-13"><a href="#cb51-13"></a>    <span class="co"># Let's set the cutoff value to 0.7 (beccause TrainingTimesLastYear does not seem to be that skewed)</span></span>
<span id="cb51-14"><a href="#cb51-14"></a>    <span class="fu">filter</span>(value <span class="sc">&gt;=</span> <span class="fl">0.7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-15"><a href="#cb51-15"></a>    <span class="fu">pull</span>(key) <span class="sc">%&gt;%</span></span>
<span id="cb51-16"><a href="#cb51-16"></a>    <span class="fu">as.character</span>()</span>
<span id="cb51-17"><a href="#cb51-17"></a></span>
<span id="cb51-18"><a href="#cb51-18"></a>train_readable_tbl <span class="sc">%&gt;%</span></span>
<span id="cb51-19"><a href="#cb51-19"></a>    <span class="fu">select</span>(<span class="fu">all_of</span>(skewed_feature_names)) <span class="sc">%&gt;%</span></span>
<span id="cb51-20"><a href="#cb51-20"></a>    <span class="fu">plot_hist_facet</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-16-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="Challenge4_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-17_0edca072f9e1cd77c504fc5feffe5cc1">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a><span class="sc">!</span>skewed_feature_names <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"JobLevel"</span>, <span class="st">"StockOptionLevel"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  [1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>skewed_feature_names <span class="ot">&lt;-</span> train_readable_tbl <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="#cb54-2"></a>    <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span></span>
<span id="cb54-3"><a href="#cb54-3"></a>    <span class="fu">map_df</span>(skewness) <span class="sc">%&gt;%</span></span>
<span id="cb54-4"><a href="#cb54-4"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb54-5"><a href="#cb54-5"></a>                 <span class="at">names_to =</span> <span class="st">"key"</span>,</span>
<span id="cb54-6"><a href="#cb54-6"></a>                 <span class="at">values_to =</span> <span class="st">"value"</span>,</span>
<span id="cb54-7"><a href="#cb54-7"></a>                 <span class="at">names_transform =</span> <span class="fu">list</span>(<span class="at">key =</span> forcats<span class="sc">::</span>fct_inorder)) <span class="sc">%&gt;%</span></span>
<span id="cb54-8"><a href="#cb54-8"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb54-9"><a href="#cb54-9"></a>    <span class="fu">filter</span>(value <span class="sc">&gt;=</span> <span class="fl">0.7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb54-10"><a href="#cb54-10"></a>    <span class="fu">filter</span>(<span class="sc">!</span>key <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"JobLevel"</span>, <span class="st">"StockOptionLevel"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb54-11"><a href="#cb54-11"></a>    <span class="fu">pull</span>(key) <span class="sc">%&gt;%</span></span>
<span id="cb54-12"><a href="#cb54-12"></a>    <span class="fu">as.character</span>()</span>
<span id="cb54-13"><a href="#cb54-13"></a>    </span>
<span id="cb54-14"><a href="#cb54-14"></a><span class="co"># We need to convert those columns to factors in the next step</span></span>
<span id="cb54-15"><a href="#cb54-15"></a>factor_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"JobLevel"</span>, <span class="st">"StockOptionLevel"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>#Fix Skewness with step_yeoJohnson()</p>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-18_744a637f903275ad28ecfcf8ddbb2e0b">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a>recipe_obj <span class="ot">&lt;-</span> <span class="fu">recipe</span>(Attrition <span class="sc">~</span> ., <span class="at">data =</span> train_readable_tbl) <span class="sc">%&gt;%</span></span>
<span id="cb55-2"><a href="#cb55-2"></a>    <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb55-3"><a href="#cb55-3"></a>    <span class="fu">step_YeoJohnson</span>(skewed_feature_names) <span class="sc">%&gt;%</span></span>
<span id="cb55-4"><a href="#cb55-4"></a>    <span class="fu">step_mutate_at</span>(factor_names, <span class="at">fn =</span> as.factor)</span>
<span id="cb55-5"><a href="#cb55-5"></a>    </span>
<span id="cb55-6"><a href="#cb55-6"></a>recipe_obj <span class="sc">%&gt;%</span> </span>
<span id="cb55-7"><a href="#cb55-7"></a>    <span class="fu">prep</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb55-8"><a href="#cb55-8"></a>    <span class="fu">bake</span>(train_readable_tbl) <span class="sc">%&gt;%</span> </span>
<span id="cb55-9"><a href="#cb55-9"></a>    <span class="fu">select</span>(skewed_feature_names) <span class="sc">%&gt;%</span></span>
<span id="cb55-10"><a href="#cb55-10"></a>    <span class="fu">plot_hist_facet</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Using an external vector in selections was deprecated in tidyselect 1.1.0.
#&gt; ℹ Please use `all_of()` or `any_of()` instead.
#&gt;   # Was:
#&gt;   data %&gt;% select(skewed_feature_names)
#&gt; 
#&gt;   # Now:
#&gt;   data %&gt;% select(all_of(skewed_feature_names))
#&gt; 
#&gt; See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Using an external vector in selections was deprecated in tidyselect 1.1.0.
#&gt; ℹ Please use `all_of()` or `any_of()` instead.
#&gt;   # Was:
#&gt;   data %&gt;% select(factor_names)
#&gt; 
#&gt;   # Now:
#&gt;   data %&gt;% select(all_of(factor_names))
#&gt; 
#&gt; See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-18-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="Challenge4_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="center-and-scale" class="level1" data-number="11"><h1 data-number="11">
<span class="header-section-number">11</span> 3. Center and scale</h1>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-19_fe111bc8882625519eb5b3e297cf38e0">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a><span class="co"># Plot numeric data</span></span>
<span id="cb58-2"><a href="#cb58-2"></a>train_readable_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb58-3"><a href="#cb58-3"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb58-4"><a href="#cb58-4"></a>  <span class="fu">plot_hist_facet</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-19-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="Challenge4_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-20_233367a2e85a34236fa904a41509cd2b">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>recipe_obj <span class="ot">&lt;-</span> <span class="fu">recipe</span>(Attrition <span class="sc">~</span> ., <span class="at">data =</span> train_readable_tbl) <span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a href="#cb59-2"></a>    <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="#cb59-3"></a>    <span class="fu">step_YeoJohnson</span>(skewed_feature_names) <span class="sc">%&gt;%</span></span>
<span id="cb59-4"><a href="#cb59-4"></a>    <span class="fu">step_mutate_at</span>(factor_names, <span class="at">fn =</span> as.factor) <span class="sc">%&gt;%</span></span>
<span id="cb59-5"><a href="#cb59-5"></a>    <span class="fu">step_center</span>(<span class="fu">all_numeric</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb59-6"><a href="#cb59-6"></a>    <span class="fu">step_scale</span>(<span class="fu">all_numeric</span>())</span>
<span id="cb59-7"><a href="#cb59-7"></a></span>
<span id="cb59-8"><a href="#cb59-8"></a><span class="co"># You can compare the means attribute before and after prepping the recipe</span></span>
<span id="cb59-9"><a href="#cb59-9"></a>recipe_obj<span class="sc">$</span>steps[[<span class="dv">4</span>]] <span class="co"># before prep</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; $terms
#&gt; &lt;list_of&lt;quosure&gt;&gt;
#&gt; 
#&gt; [[1]]
#&gt; &lt;quosure&gt;
#&gt; expr: ^all_numeric()
#&gt; env:  0x00000152334a1a78
#&gt; 
#&gt; 
#&gt; $role
#&gt; [1] NA
#&gt; 
#&gt; $trained
#&gt; [1] FALSE
#&gt; 
#&gt; $means
#&gt; NULL
#&gt; 
#&gt; $na_rm
#&gt; [1] TRUE
#&gt; 
#&gt; $skip
#&gt; [1] FALSE
#&gt; 
#&gt; $id
#&gt; [1] "center_GWd48"
#&gt; 
#&gt; $case_weights
#&gt; NULL
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "step_center" "step"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a>prepared_recipe <span class="ot">&lt;-</span> recipe_obj <span class="sc">%&gt;%</span> <span class="fu">prep</span>()</span>
<span id="cb61-2"><a href="#cb61-2"></a>prepared_recipe<span class="sc">$</span>steps[[<span class="dv">4</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; $terms
#&gt; &lt;list_of&lt;quosure&gt;&gt;
#&gt; 
#&gt; [[1]]
#&gt; &lt;quosure&gt;
#&gt; expr: ^all_numeric()
#&gt; env:  0x00000152334a1a78
#&gt; 
#&gt; 
#&gt; $role
#&gt; [1] NA
#&gt; 
#&gt; $trained
#&gt; [1] TRUE
#&gt; 
#&gt; $means
#&gt;                     Age               DailyRate        DistanceFromHome 
#&gt;            3.689672e+01            7.978519e+02            2.009472e+00 
#&gt;          EmployeeNumber              HourlyRate           MonthlyIncome 
#&gt;            1.039169e+03            6.595757e+01            3.926886e+00 
#&gt;             MonthlyRate      NumCompaniesWorked       PercentSalaryHike 
#&gt;            1.447811e+04            1.050292e+00            6.783763e-01 
#&gt;       TotalWorkingYears   TrainingTimesLastYear          YearsAtCompany 
#&gt;            3.352732e+00            2.786229e+00            2.011652e+00 
#&gt;      YearsInCurrentRole YearsSinceLastPromotion    YearsWithCurrManager 
#&gt;            1.727181e+00            5.225350e-01            1.709616e+00 
#&gt; 
#&gt; $na_rm
#&gt; [1] TRUE
#&gt; 
#&gt; $skip
#&gt; [1] FALSE
#&gt; 
#&gt; $id
#&gt; [1] "center_GWd48"
#&gt; 
#&gt; $case_weights
#&gt; NULL
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "step_center" "step"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a>prepared_recipe <span class="sc">%&gt;%</span></span>
<span id="cb63-2"><a href="#cb63-2"></a>    <span class="fu">bake</span>(<span class="at">new_data =</span> train_readable_tbl) <span class="sc">%&gt;%</span></span>
<span id="cb63-3"><a href="#cb63-3"></a>    <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb63-4"><a href="#cb63-4"></a>    <span class="fu">plot_hist_facet</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-20-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="Challenge4_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-21_31060d53b0c5fd449e3d7c6f3df15d33">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a><span class="co"># 4. Dummy variables ----</span></span>
<span id="cb64-2"><a href="#cb64-2"></a></span>
<span id="cb64-3"><a href="#cb64-3"></a>recipe_obj <span class="ot">&lt;-</span> <span class="fu">recipe</span>(Attrition <span class="sc">~</span> ., <span class="at">data =</span> train_readable_tbl) <span class="sc">%&gt;%</span></span>
<span id="cb64-4"><a href="#cb64-4"></a>    <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb64-5"><a href="#cb64-5"></a>    <span class="fu">step_YeoJohnson</span>(skewed_feature_names) <span class="sc">%&gt;%</span></span>
<span id="cb64-6"><a href="#cb64-6"></a>    <span class="fu">step_mutate_at</span>(factor_names, <span class="at">fn =</span> as.factor) <span class="sc">%&gt;%</span></span>
<span id="cb64-7"><a href="#cb64-7"></a>    <span class="fu">step_center</span>(<span class="fu">all_numeric</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb64-8"><a href="#cb64-8"></a>    <span class="fu">step_scale</span>(<span class="fu">all_numeric</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb64-9"><a href="#cb64-9"></a>    <span class="fu">step_dummy</span>(<span class="fu">all_nominal</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb64-10"><a href="#cb64-10"></a>    </span>
<span id="cb64-11"><a href="#cb64-11"></a>    <span class="co"># prepare the final recipe</span></span>
<span id="cb64-12"><a href="#cb64-12"></a>    <span class="fu">prep</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-22_661a18a30b525b8bcebc4af903f9cc72">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a>train_tbl <span class="ot">&lt;-</span> <span class="fu">bake</span>(recipe_obj, <span class="at">new_data =</span> train_readable_tbl)</span>
<span id="cb65-2"><a href="#cb65-2"></a></span>
<span id="cb65-3"><a href="#cb65-3"></a>train_tbl <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Rows: 1,249
#&gt; Columns: 66
#&gt; $ Age                                &lt;dbl&gt; 0.12135569, 1.66128715, 0.56133611,…
#&gt; $ DailyRate                          &lt;dbl&gt; 1.72799052, 1.72799052, 1.16626413,…
#&gt; $ DistanceFromHome                   &lt;dbl&gt; -1.0115152, -0.4249586, -0.6817922,…
#&gt; $ EmployeeNumber                     &lt;dbl&gt; -0.80492713, -0.82158646, -0.241841…
#&gt; $ HourlyRate                         &lt;dbl&gt; -1.19426800, -1.79245965, 1.4477451…
#&gt; $ MonthlyIncome                      &lt;dbl&gt; -1.86207613, 1.63117757, 0.07274848…
#&gt; $ MonthlyRate                        &lt;dbl&gt; -0.3347480, -0.5881964, 1.3050466, …
#&gt; $ NumCompaniesWorked                 &lt;dbl&gt; -0.57820949, 0.02672436, 0.02672436…
#&gt; $ PercentSalaryHike                  &lt;dbl&gt; 1.6610314, -0.4802126, -0.4802126, …
#&gt; $ TotalWorkingYears                  &lt;dbl&gt; -2.00413096, 1.96812006, 0.86999363…
#&gt; $ TrainingTimesLastYear              &lt;dbl&gt; 0.1653511, -0.6081451, -1.3816412, …
#&gt; $ YearsAtCompany                     &lt;dbl&gt; -1.45454900, -0.05799426, -0.057994…
#&gt; $ YearsInCurrentRole                 &lt;dbl&gt; -1.60865321, -0.43886958, -0.078447…
#&gt; $ YearsSinceLastPromotion            &lt;dbl&gt; -1.0965229, 0.1067096, 0.1067096, -…
#&gt; $ YearsWithCurrManager               &lt;dbl&gt; -1.56287774, 0.23200520, -0.0599865…
#&gt; $ BusinessTravel_Travel_Rarely       &lt;dbl&gt; 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1,…
#&gt; $ BusinessTravel_Travel_Frequently   &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0,…
#&gt; $ Department_Research...Development  &lt;dbl&gt; 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 1,…
#&gt; $ Department_Sales                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0,…
#&gt; $ Education_College                  &lt;dbl&gt; 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ Education_Bachelor                 &lt;dbl&gt; 0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0,…
#&gt; $ Education_Master                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1,…
#&gt; $ Education_Doctor                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ EducationField_Life.Sciences       &lt;dbl&gt; 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 0,…
#&gt; $ EducationField_Marketing           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0,…
#&gt; $ EducationField_Medical             &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0,…
#&gt; $ EducationField_Other               &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ EducationField_Technical.Degree    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,…
#&gt; $ EnvironmentSatisfaction_Medium     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,…
#&gt; $ EnvironmentSatisfaction_High       &lt;dbl&gt; 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0,…
#&gt; $ EnvironmentSatisfaction_Very.High  &lt;dbl&gt; 1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0,…
#&gt; $ Gender_Male                        &lt;dbl&gt; 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1,…
#&gt; $ JobInvolvement_Medium              &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ JobInvolvement_High                &lt;dbl&gt; 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1,…
#&gt; $ JobInvolvement_Very.High           &lt;dbl&gt; 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0,…
#&gt; $ JobLevel_X2                        &lt;dbl&gt; 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0,…
#&gt; $ JobLevel_X3                        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ JobLevel_X4                        &lt;dbl&gt; 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0,…
#&gt; $ JobLevel_X5                        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ JobRole_Human.Resources            &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ JobRole_Laboratory.Technician      &lt;dbl&gt; 1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0,…
#&gt; $ JobRole_Manager                    &lt;dbl&gt; 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0,…
#&gt; $ JobRole_Manufacturing.Director     &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ JobRole_Research.Director          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ JobRole_Research.Scientist         &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1,…
#&gt; $ JobRole_Sales.Executive            &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0,…
#&gt; $ JobRole_Sales.Representative       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ JobSatisfaction_Medium             &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1,…
#&gt; $ JobSatisfaction_High               &lt;dbl&gt; 0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 0,…
#&gt; $ JobSatisfaction_Very.High          &lt;dbl&gt; 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0,…
#&gt; $ MaritalStatus_Married              &lt;dbl&gt; 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1,…
#&gt; $ MaritalStatus_Divorced             &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 0,…
#&gt; $ OverTime_Yes                       &lt;dbl&gt; 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0,…
#&gt; $ PerformanceRating_Good             &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ PerformanceRating_Excellent        &lt;dbl&gt; 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1,…
#&gt; $ PerformanceRating_Outstanding      &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0,…
#&gt; $ RelationshipSatisfaction_Medium    &lt;dbl&gt; 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ RelationshipSatisfaction_High      &lt;dbl&gt; 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1,…
#&gt; $ RelationshipSatisfaction_Very.High &lt;dbl&gt; 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ StockOptionLevel_X1                &lt;dbl&gt; 1, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1,…
#&gt; $ StockOptionLevel_X2                &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0,…
#&gt; $ StockOptionLevel_X3                &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0,…
#&gt; $ WorkLifeBalance_Good               &lt;dbl&gt; 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1,…
#&gt; $ WorkLifeBalance_Better             &lt;dbl&gt; 1, 0, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0,…
#&gt; $ WorkLifeBalance_Best               &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ Attrition_Yes                      &lt;dbl&gt; 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0,…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a>test_tbl <span class="ot">&lt;-</span> <span class="fu">bake</span>(recipe_obj, <span class="at">new_data =</span> test_readable_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-23_7eab47d0f485a0c37f42b6b64aa3d1cd">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a>train_tbl <span class="sc">%&gt;%</span></span>
<span id="cb68-2"><a href="#cb68-2"></a></span>
<span id="cb68-3"><a href="#cb68-3"></a>        <span class="co"># Convert characters &amp; factors to numeric</span></span>
<span id="cb68-4"><a href="#cb68-4"></a>        <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), as.factor)) <span class="sc">%&gt;%</span></span>
<span id="cb68-5"><a href="#cb68-5"></a>        <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor), as.numeric)) <span class="sc">%&gt;%</span></span>
<span id="cb68-6"><a href="#cb68-6"></a>        </span>
<span id="cb68-7"><a href="#cb68-7"></a>        <span class="co"># Correlation</span></span>
<span id="cb68-8"><a href="#cb68-8"></a>        <span class="fu">cor</span>(<span class="at">use =</span> <span class="st">"pairwise.complete.obs"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb68-9"><a href="#cb68-9"></a>        <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb68-10"><a href="#cb68-10"></a>        <span class="fu">mutate</span>(<span class="at">feature =</span> <span class="fu">names</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb68-11"><a href="#cb68-11"></a>        <span class="fu">select</span>(feature, Attrition_Yes) <span class="sc">%&gt;%</span> </span>
<span id="cb68-12"><a href="#cb68-12"></a>        </span>
<span id="cb68-13"><a href="#cb68-13"></a>        <span class="co"># Filter the target, because we now the correlation is 100%</span></span>
<span id="cb68-14"><a href="#cb68-14"></a>        <span class="fu">filter</span>(<span class="sc">!</span>(feature <span class="sc">==</span> <span class="st">"Attrition_Yes"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb68-15"><a href="#cb68-15"></a>        </span>
<span id="cb68-16"><a href="#cb68-16"></a>        <span class="co"># Convert character back to factors</span></span>
<span id="cb68-17"><a href="#cb68-17"></a>        <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), as_factor))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning in stats::cor(x, ...): Standardabweichung ist Null</code></pre>
</div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["feature"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Attrition_Yes"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Age","2":"-0.161863233"},{"1":"DailyRate","2":"-0.062467471"},{"1":"DistanceFromHome","2":"0.079603606"},{"1":"EmployeeNumber","2":"-0.019686125"},{"1":"HourlyRate","2":"-0.015333593"},{"1":"MonthlyIncome","2":"-0.202617100"},{"1":"MonthlyRate","2":"0.013928255"},{"1":"NumCompaniesWorked","2":"0.033238730"},{"1":"PercentSalaryHike","2":"0.002315050"},{"1":"TotalWorkingYears","2":"-0.224528615"},{"1":"TrainingTimesLastYear","2":"-0.066405747"},{"1":"YearsAtCompany","2":"-0.202041403"},{"1":"YearsInCurrentRole","2":"-0.182338959"},{"1":"YearsSinceLastPromotion","2":"-0.057213055"},{"1":"YearsWithCurrManager","2":"-0.185668369"},{"1":"BusinessTravel_Travel_Rarely","2":"-0.066999036"},{"1":"BusinessTravel_Travel_Frequently","2":"0.131670210"},{"1":"Department_Research...Development","2":"-0.077267266"},{"1":"Department_Sales","2":"0.071976341"},{"1":"Education_College","2":"-0.008304072"},{"1":"Education_Bachelor","2":"0.039484357"},{"1":"Education_Master","2":"-0.039711617"},{"1":"Education_Doctor","2":"-0.019979377"},{"1":"EducationField_Life.Sciences","2":"-0.043389660"},{"1":"EducationField_Marketing","2":"0.071002498"},{"1":"EducationField_Medical","2":"-0.062707595"},{"1":"EducationField_Other","2":"0.004807121"},{"1":"EducationField_Technical.Degree","2":"0.067398461"},{"1":"EnvironmentSatisfaction_Medium","2":"-0.010366082"},{"1":"EnvironmentSatisfaction_High","2":"-0.039834673"},{"1":"EnvironmentSatisfaction_Very.High","2":"-0.062012224"},{"1":"Gender_Male","2":"0.029607646"},{"1":"JobInvolvement_Medium","2":"0.041743621"},{"1":"JobInvolvement_High","2":"-0.048309106"},{"1":"JobInvolvement_Very.High","2":"-0.056695527"},{"1":"JobLevel_X2","2":"-0.117148966"},{"1":"JobLevel_X3","2":"-0.033059969"},{"1":"JobLevel_X4","2":"-0.088374729"},{"1":"JobLevel_X5","2":"-0.049808190"},{"1":"JobRole_Human.Resources","2":"0.034011470"},{"1":"JobRole_Laboratory.Technician","2":"0.091462301"},{"1":"JobRole_Manager","2":"-0.072513108"},{"1":"JobRole_Manufacturing.Director","2":"-0.075265877"},{"1":"JobRole_Research.Director","2":"-0.097903674"},{"1":"JobRole_Research.Scientist","2":"0.005663501"},{"1":"JobRole_Sales.Executive","2":"0.015358456"},{"1":"JobRole_Sales.Representative","2":"0.141362385"},{"1":"JobSatisfaction_Medium","2":"0.003765563"},{"1":"JobSatisfaction_High","2":"0.027719307"},{"1":"JobSatisfaction_Very.High","2":"-0.096861825"},{"1":"MaritalStatus_Married","2":"-0.085519597"},{"1":"MaritalStatus_Divorced","2":"-0.064737234"},{"1":"OverTime_Yes","2":"0.257056780"},{"1":"PerformanceRating_Good","2":"NA"},{"1":"PerformanceRating_Excellent","2":"-0.020646607"},{"1":"PerformanceRating_Outstanding","2":"0.020646607"},{"1":"RelationshipSatisfaction_Medium","2":"0.001499324"},{"1":"RelationshipSatisfaction_High","2":"-0.039834673"},{"1":"RelationshipSatisfaction_Very.High","2":"-0.022170769"},{"1":"StockOptionLevel_X1","2":"-0.136870926"},{"1":"StockOptionLevel_X2","2":"-0.077868538"},{"1":"StockOptionLevel_X3","2":"0.028975031"},{"1":"WorkLifeBalance_Good","2":"0.008375398"},{"1":"WorkLifeBalance_Better","2":"-0.061330453"},{"1":"WorkLifeBalance_Best","2":"0.021122532"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-24_f9c93f5068826bb25de85545b38b82c0">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a><span class="fu">source</span>(<span class="st">"get_cor.R"</span>)</span>
<span id="cb70-2"><a href="#cb70-2"></a></span>
<span id="cb70-3"><a href="#cb70-3"></a><span class="fu">source</span>(<span class="st">"plot_cor.R"</span>)</span>
<span id="cb70-4"><a href="#cb70-4"></a></span>
<span id="cb70-5"><a href="#cb70-5"></a><span class="fu">plot_cor</span>(<span class="at">data =</span> train_tbl, <span class="at">target =</span> Attrition_Yes, <span class="at">fct_reorder =</span> T, <span class="at">fct_rev =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: `as.tibble()` was deprecated in tibble 2.0.0.
#&gt; ℹ Please use `as_tibble()` instead.
#&gt; ℹ The signature and semantics have changed, see `?as_tibble`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning in stats::cor(x, ...): Standardabweichung ist Null</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: There was 1 warning in `mutate()`.
#&gt; ℹ In argument: `feature = fct_reorder(feature, Attrition_Yes)`.
#&gt; Caused by warning:
#&gt; ! `fct_reorder()` removing 1 missing value.
#&gt; ℹ Use `.na_rm = TRUE` to silence this message.
#&gt; ℹ Use `.na_rm = FALSE` to preserve NAs.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
#&gt; ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Removed 1 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Removed 1 rows containing missing values (`geom_segment()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Removed 1 rows containing missing values (`geom_label()`).</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-24-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="Challenge4_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-25_ccf919419678f953d730c200cd52b450">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1"></a>train_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb78-2"><a href="#cb78-2"></a>  <span class="fu">select</span>(Attrition_Yes, <span class="fu">contains</span>(<span class="st">"JobRole"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb78-3"><a href="#cb78-3"></a>  <span class="fu">plot_cor</span>(<span class="at">target =</span> Attrition_Yes, <span class="at">fct_reorder =</span> T, <span class="at">fct_rev =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-25-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="Challenge4_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="correlation-evaluation--" class="level1" data-number="12"><h1 data-number="12">
<span class="header-section-number">12</span> Correlation Evaluation —-</h1>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-26_561f6976dfbcfcca207748b35c79de38">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a><span class="co">#   1. Descriptive features: age, gender, marital status </span></span>
<span id="cb79-2"><a href="#cb79-2"></a>train_tbl <span class="sc">%&gt;%</span></span>
<span id="cb79-3"><a href="#cb79-3"></a>    <span class="fu">select</span>(Attrition_Yes, Age, <span class="fu">contains</span>(<span class="st">"Gender"</span>), </span>
<span id="cb79-4"><a href="#cb79-4"></a>           <span class="fu">contains</span>(<span class="st">"MaritalStatus"</span>), NumCompaniesWorked, </span>
<span id="cb79-5"><a href="#cb79-5"></a>           <span class="fu">contains</span>(<span class="st">"Over18"</span>), DistanceFromHome) <span class="sc">%&gt;%</span></span>
<span id="cb79-6"><a href="#cb79-6"></a>    <span class="fu">plot_cor</span>(<span class="at">target =</span> Attrition_Yes, <span class="at">fct_reorder =</span> T, <span class="at">fct_rev =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-26-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="Challenge4_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-27_385e6c176386aec4b3bae7d792f39743">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1"></a><span class="co">#   2. Employment features: department, job role, job level</span></span>
<span id="cb80-2"><a href="#cb80-2"></a>train_tbl <span class="sc">%&gt;%</span></span>
<span id="cb80-3"><a href="#cb80-3"></a>     <span class="fu">select</span>(Attrition_Yes, <span class="fu">contains</span>(<span class="st">"employee"</span>), <span class="fu">contains</span>(<span class="st">"department"</span>), <span class="fu">contains</span>(<span class="st">"job"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb80-4"><a href="#cb80-4"></a>     <span class="fu">plot_cor</span>(<span class="at">target =</span> Attrition_Yes, <span class="at">fct_reorder =</span> F, <span class="at">fct_rev =</span> F) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-27-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="Challenge4_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a><span class="co">#   3. Compensation features: HourlyRate, MonthlyIncome, StockOptionLevel </span></span>
<span id="cb81-2"><a href="#cb81-2"></a>train_tbl <span class="sc">%&gt;%</span></span>
<span id="cb81-3"><a href="#cb81-3"></a>    <span class="fu">select</span>(Attrition_Yes, <span class="fu">contains</span>(<span class="st">"income"</span>), <span class="fu">contains</span>(<span class="st">"rate"</span>), <span class="fu">contains</span>(<span class="st">"salary"</span>), <span class="fu">contains</span>(<span class="st">"stock"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb81-4"><a href="#cb81-4"></a>    <span class="fu">plot_cor</span>(<span class="at">target =</span> Attrition_Yes, <span class="at">fct_reorder =</span> F, <span class="at">fct_rev =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-27-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="Challenge4_files/figure-html/unnamed-chunk-27-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a><span class="co">#   4. Survey Results: Satisfaction level, WorkLifeBalance </span></span>
<span id="cb82-2"><a href="#cb82-2"></a>train_tbl <span class="sc">%&gt;%</span></span>
<span id="cb82-3"><a href="#cb82-3"></a>    <span class="fu">select</span>(Attrition_Yes, <span class="fu">contains</span>(<span class="st">"satisfaction"</span>), <span class="fu">contains</span>(<span class="st">"life"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb82-4"><a href="#cb82-4"></a>    <span class="fu">plot_cor</span>(<span class="at">target =</span> Attrition_Yes, <span class="at">fct_reorder =</span> F, <span class="at">fct_rev =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-27-3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="Challenge4_files/figure-html/unnamed-chunk-27-3.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a><span class="co">#   5. Performance Data: Job Involvment, Performance Rating</span></span>
<span id="cb83-2"><a href="#cb83-2"></a>train_tbl <span class="sc">%&gt;%</span></span>
<span id="cb83-3"><a href="#cb83-3"></a>    <span class="fu">select</span>(Attrition_Yes, <span class="fu">contains</span>(<span class="st">"performance"</span>), <span class="fu">contains</span>(<span class="st">"involvement"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb83-4"><a href="#cb83-4"></a>    <span class="fu">plot_cor</span>(<span class="at">target =</span> Attrition_Yes, <span class="at">fct_reorder =</span> F, <span class="at">fct_rev =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning in stats::cor(x, ...): Standardabweichung ist Null</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Removed 1 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Removed 1 rows containing missing values (`geom_segment()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Removed 1 rows containing missing values (`geom_label()`).</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-27-4.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="Challenge4_files/figure-html/unnamed-chunk-27-4.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a><span class="co">#   6. Work-Life Features </span></span>
<span id="cb88-2"><a href="#cb88-2"></a>train_tbl <span class="sc">%&gt;%</span></span>
<span id="cb88-3"><a href="#cb88-3"></a>    <span class="fu">select</span>(Attrition_Yes, <span class="fu">contains</span>(<span class="st">"overtime"</span>), <span class="fu">contains</span>(<span class="st">"travel"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb88-4"><a href="#cb88-4"></a>    <span class="fu">plot_cor</span>(<span class="at">target =</span> Attrition_Yes, <span class="at">fct_reorder =</span> F, <span class="at">fct_rev =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-27-5.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16"><img src="Challenge4_files/figure-html/unnamed-chunk-27-5.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1"></a><span class="co">#   7. Training and Education </span></span>
<span id="cb89-2"><a href="#cb89-2"></a>train_tbl <span class="sc">%&gt;%</span></span>
<span id="cb89-3"><a href="#cb89-3"></a>    <span class="fu">select</span>(Attrition_Yes, <span class="fu">contains</span>(<span class="st">"training"</span>), <span class="fu">contains</span>(<span class="st">"education"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb89-4"><a href="#cb89-4"></a>    <span class="fu">plot_cor</span>(<span class="at">target =</span> Attrition_Yes, <span class="at">fct_reorder =</span> F, <span class="at">fct_rev =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-27-6.png" class="lightbox" data-gallery="quarto-lightbox-gallery-17"><img src="Challenge4_files/figure-html/unnamed-chunk-27-6.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a><span class="co">#   8. Time-Based Features: Years at company, years in current role</span></span>
<span id="cb90-2"><a href="#cb90-2"></a>train_tbl <span class="sc">%&gt;%</span></span>
<span id="cb90-3"><a href="#cb90-3"></a>    <span class="fu">select</span>(Attrition_Yes, <span class="fu">contains</span>(<span class="st">"years"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb90-4"><a href="#cb90-4"></a>    <span class="fu">plot_cor</span>(<span class="at">target =</span> Attrition_Yes, <span class="at">fct_reorder =</span> F, <span class="at">fct_rev =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="Challenge4_files/figure-html/unnamed-chunk-27-7.png" class="lightbox" data-gallery="quarto-lightbox-gallery-18"><img src="Challenge4_files/figure-html/unnamed-chunk-27-7.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>#H2o</p>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-28_dbe6cb71e77cfc76bd4f00e0289dc927">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1"></a>employee_attrition_tbl          <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"datasets-1067-1925-WA_Fn-UseC_-HR-Employee-Attrition.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Rows: 1470 Columns: 35
#&gt; ── Column specification ────────────────────────────────────────────────────────
#&gt; Delimiter: ","
#&gt; chr  (9): Attrition, BusinessTravel, Department, EducationField, Gender, Job...
#&gt; dbl (26): Age, DailyRate, DistanceFromHome, Education, EmployeeCount, Employ...
#&gt; 
#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.
#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1"></a>definitions_raw_tbl             <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data_definitions.xlsx"</span>, <span class="at">sheet =</span> <span class="dv">1</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; New names:
#&gt; • `` -&gt; `...1`
#&gt; • `` -&gt; `...2`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1"></a>employee_attrition_readable_tbl <span class="ot">&lt;-</span> <span class="fu">process_hr_data_readable</span>(employee_attrition_tbl, definitions_raw_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Joining with `by = join_by(Education)`
#&gt; Joining with `by = join_by(EnvironmentSatisfaction)`
#&gt; Joining with `by = join_by(JobInvolvement)`
#&gt; Joining with `by = join_by(JobSatisfaction)`
#&gt; Joining with `by = join_by(PerformanceRating)`
#&gt; Joining with `by = join_by(RelationshipSatisfaction)`
#&gt; Joining with `by = join_by(WorkLifeBalance)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1"></a><span class="fu">set.seed</span>(<span class="at">seed =</span> <span class="dv">1113</span>)</span>
<span id="cb97-2"><a href="#cb97-2"></a>split_obj                       <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">initial_split</span>(employee_attrition_readable_tbl, <span class="at">prop =</span> <span class="fl">0.85</span>)</span>
<span id="cb97-3"><a href="#cb97-3"></a>train_readable_tbl              <span class="ot">&lt;-</span> <span class="fu">training</span>(split_obj)</span>
<span id="cb97-4"><a href="#cb97-4"></a>test_readable_tbl               <span class="ot">&lt;-</span> <span class="fu">testing</span>(split_obj)</span>
<span id="cb97-5"><a href="#cb97-5"></a></span>
<span id="cb97-6"><a href="#cb97-6"></a>recipe_obj <span class="ot">&lt;-</span> <span class="fu">recipe</span>(Attrition <span class="sc">~</span>., <span class="at">data =</span> train_readable_tbl) <span class="sc">%&gt;%</span> </span>
<span id="cb97-7"><a href="#cb97-7"></a>    <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb97-8"><a href="#cb97-8"></a>    <span class="fu">step_mutate_at</span>(JobLevel, StockOptionLevel, <span class="at">fn =</span> as.factor) <span class="sc">%&gt;%</span> </span>
<span id="cb97-9"><a href="#cb97-9"></a>    <span class="fu">prep</span>()</span>
<span id="cb97-10"><a href="#cb97-10"></a></span>
<span id="cb97-11"><a href="#cb97-11"></a>train_tbl <span class="ot">&lt;-</span> <span class="fu">bake</span>(recipe_obj, <span class="at">new_data =</span> train_readable_tbl)</span>
<span id="cb97-12"><a href="#cb97-12"></a>test_tbl  <span class="ot">&lt;-</span> <span class="fu">bake</span>(recipe_obj, <span class="at">new_data =</span> test_readable_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="modeling" class="level1" data-number="13"><h1 data-number="13">
<span class="header-section-number">13</span> Modeling</h1>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-29_0f35ab218a65af10476c53e1fec09068">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1"></a><span class="fu">h2o.init</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  Connection successful!
#&gt; 
#&gt; R is connected to the H2O cluster: 
#&gt;     H2O cluster uptime:         28 minutes 13 seconds 
#&gt;     H2O cluster timezone:       Europe/Berlin 
#&gt;     H2O data parsing timezone:  UTC 
#&gt;     H2O cluster version:        3.40.0.1 
#&gt;     H2O cluster version age:    3 months and 21 days 
#&gt;     H2O cluster name:           H2O_started_from_R_tiend_ham688 
#&gt;     H2O cluster total nodes:    1 
#&gt;     H2O cluster total memory:   3.77 GB 
#&gt;     H2O cluster total cores:    12 
#&gt;     H2O cluster allowed cores:  12 
#&gt;     H2O cluster healthy:        TRUE 
#&gt;     H2O Connection ip:          localhost 
#&gt;     H2O Connection port:        54321 
#&gt;     H2O Connection proxy:       NA 
#&gt;     H2O Internal Security:      FALSE 
#&gt;     R Version:                  R version 4.2.3 (2023-03-15 ucrt)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning in h2o.clusterInfo(): 
#&gt; Your H2O cluster version is (3 months and 21 days) old. There may be a newer version available.
#&gt; Please download and install the latest version from: https://h2o-release.s3.amazonaws.com/h2o/latest_stable.html</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1"></a><span class="co"># Split data into a training and a validation data frame</span></span>
<span id="cb101-2"><a href="#cb101-2"></a><span class="co"># Setting the seed is just for reproducability</span></span>
<span id="cb101-3"><a href="#cb101-3"></a>split_h2o <span class="ot">&lt;-</span> <span class="fu">h2o.splitFrame</span>(<span class="fu">as.h2o</span>(train_tbl), <span class="at">ratios =</span> <span class="fu">c</span>(<span class="fl">0.85</span>), <span class="at">seed =</span> <span class="dv">1234</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1"></a>train_h2o <span class="ot">&lt;-</span> split_h2o[[<span class="dv">1</span>]]</span>
<span id="cb103-2"><a href="#cb103-2"></a>valid_h2o <span class="ot">&lt;-</span> split_h2o[[<span class="dv">2</span>]]</span>
<span id="cb103-3"><a href="#cb103-3"></a>test_h2o  <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(test_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1"></a><span class="co"># Set the target and predictors</span></span>
<span id="cb105-2"><a href="#cb105-2"></a>y <span class="ot">&lt;-</span> <span class="st">"Attrition"</span></span>
<span id="cb105-3"><a href="#cb105-3"></a>x <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(train_h2o), y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-30_77c8ad8403badda396c0646fae88a8e2">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1"></a>automl_models_h2o <span class="ot">&lt;-</span> <span class="fu">h2o.automl</span>(</span>
<span id="cb106-2"><a href="#cb106-2"></a>  <span class="at">x =</span> x,</span>
<span id="cb106-3"><a href="#cb106-3"></a>  <span class="at">y =</span> y,</span>
<span id="cb106-4"><a href="#cb106-4"></a>  <span class="at">training_frame    =</span> train_h2o,</span>
<span id="cb106-5"><a href="#cb106-5"></a>  <span class="at">validation_frame  =</span> valid_h2o,</span>
<span id="cb106-6"><a href="#cb106-6"></a>  <span class="at">leaderboard_frame =</span> test_h2o,</span>
<span id="cb106-7"><a href="#cb106-7"></a>  <span class="at">max_runtime_secs  =</span> <span class="dv">30</span>,</span>
<span id="cb106-8"><a href="#cb106-8"></a>  <span class="at">nfolds            =</span> <span class="dv">5</span> </span>
<span id="cb106-9"><a href="#cb106-9"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |====                                                                  |   6%
#&gt; 22:25:36.902: User specified a validation frame with cross-validation still enabled. Please note that the models will still be validated using cross-validation only, the validation frame will be used to provide purely informative validation metrics on the trained models.
#&gt; 22:25:36.905: AutoML: XGBoost is not available; skipping it.
  |                                                                            
  |=============                                                         |  18%
  |                                                                            
  |====================                                                  |  28%
  |                                                                            
  |=====================                                                 |  30%
  |                                                                            
  |======================                                                |  32%
  |                                                                            
  |=============================                                         |  42%
  |                                                                            
  |========================================                              |  57%
  |                                                                            
  |===================================================                   |  72%
  |                                                                            
  |=========================================================             |  82%
  |                                                                            
  |=================================================================     |  92%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-31_4619f7daa937f5dbc31beaf26f59537e">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1"></a><span class="fu">typeof</span>(automl_models_h2o)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "S4"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1"></a><span class="do">## "S4"</span></span>
<span id="cb110-2"><a href="#cb110-2"></a></span>
<span id="cb110-3"><a href="#cb110-3"></a><span class="fu">slotNames</span>(automl_models_h2o)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "project_name"   "leader"         "leaderboard"    "event_log"     
#&gt; [5] "modeling_steps" "training_info"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1"></a><span class="do">## [1] "project_name"   "leader"         "leaderboard"    "event_log"      "modeling_steps" "training_info" </span></span>
<span id="cb112-2"><a href="#cb112-2"></a></span>
<span id="cb112-3"><a href="#cb112-3"></a>automl_models_h2o<span class="sc">@</span>leaderboard</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;                                                  model_id       auc   logloss
#&gt; 1    StackedEnsemble_AllModels_2_AutoML_4_20230529_222536 0.8570878 0.3457396
#&gt; 2 StackedEnsemble_BestOfFamily_3_AutoML_4_20230529_222536 0.8555470 0.3482861
#&gt; 3 StackedEnsemble_BestOfFamily_4_AutoML_4_20230529_222536 0.8550334 0.3507665
#&gt; 4                          GLM_1_AutoML_4_20230529_222536 0.8536210 0.3519809
#&gt; 5 StackedEnsemble_BestOfFamily_2_AutoML_4_20230529_222536 0.8536210 0.3516953
#&gt; 6    StackedEnsemble_AllModels_1_AutoML_4_20230529_222536 0.8524653 0.3502106
#&gt;       aucpr mean_per_class_error      rmse       mse
#&gt; 1 0.7201560            0.2356831 0.3203094 0.1025981
#&gt; 2 0.7009316            0.2442219 0.3225032 0.1040083
#&gt; 3 0.7067570            0.2442219 0.3235050 0.1046555
#&gt; 4 0.7018518            0.2470467 0.3227215 0.1041491
#&gt; 5 0.7018518            0.2470467 0.3243967 0.1052332
#&gt; 6 0.7145214            0.1986389 0.3202698 0.1025728
#&gt; 
#&gt; [46 rows x 7 columns]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1"></a><span class="do">##                                              model_id       auc   logloss     aucpr mean_per_class_error      rmse        mse</span></span>
<span id="cb114-2"><a href="#cb114-2"></a><span class="do">## 1 StackedEnsemble_BestOfFamily_AutoML_20200820_190823 0.8585439 0.2992854 0.5869929            0.2406915 0.2978416 0.08870964</span></span>
<span id="cb114-3"><a href="#cb114-3"></a><span class="do">## 2          GBM_grid__1_AutoML_20200820_190823_model_3 0.8494016 0.3137896 0.5165541            0.2386968 0.3098134 0.09598435</span></span>
<span id="cb114-4"><a href="#cb114-4"></a><span class="do">## 3 DeepLearning_grid__1_AutoML_20200820_190823_model_1 0.8479056 0.3066365 0.6154288            0.2583112 0.3071528 0.09434283</span></span>
<span id="cb114-5"><a href="#cb114-5"></a><span class="do">## 4      XGBoost_grid__1_AutoML_20200820_190823_model_5 0.8439162 0.3057109 0.5299331            0.2061170 0.3071419 0.09433613</span></span>
<span id="cb114-6"><a href="#cb114-6"></a><span class="do">## 5    StackedEnsemble_AllModels_AutoML_20200820_190823 0.8425864 0.3211612 0.5205591            0.2539894 0.3107399 0.09655928</span></span>
<span id="cb114-7"><a href="#cb114-7"></a><span class="do">## 6      XGBoost_grid__1_AutoML_20200820_190823_model_6 0.8257979 0.3211936 0.5009608            0.2536569 0.3111129 0.09679122</span></span>
<span id="cb114-8"><a href="#cb114-8"></a><span class="do">##</span></span>
<span id="cb114-9"><a href="#cb114-9"></a><span class="do">## [30 rows x 7 columns] </span></span>
<span id="cb114-10"><a href="#cb114-10"></a></span>
<span id="cb114-11"><a href="#cb114-11"></a>automl_models_h2o<span class="sc">@</span>leader</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Model Details:
#&gt; ==============
#&gt; 
#&gt; H2OBinomialModel: stackedensemble
#&gt; Model ID:  StackedEnsemble_AllModels_2_AutoML_4_20230529_222536 
#&gt; Model Summary for Stacked Ensemble: 
#&gt;                                          key            value
#&gt; 1                          Stacking strategy cross_validation
#&gt; 2       Number of base models (used / total)              6/9
#&gt; 3           # GBM base models (used / total)              4/5
#&gt; 4           # GLM base models (used / total)              1/1
#&gt; 5  # DeepLearning base models (used / total)              1/1
#&gt; 6           # DRF base models (used / total)              0/2
#&gt; 7                      Metalearner algorithm              GLM
#&gt; 8         Metalearner fold assignment scheme           Random
#&gt; 9                         Metalearner nfolds                5
#&gt; 10                   Metalearner fold_column               NA
#&gt; 11        Custom metalearner hyperparameters             None
#&gt; 
#&gt; 
#&gt; H2OBinomialMetrics: stackedensemble
#&gt; ** Reported on training data. **
#&gt; 
#&gt; MSE:  0.05985868
#&gt; RMSE:  0.2446603
#&gt; LogLoss:  0.2214039
#&gt; Mean Per-Class Error:  0.146485
#&gt; AUC:  0.9249619
#&gt; AUCPR:  0.8264121
#&gt; Gini:  0.8499237
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error      Rate
#&gt; No     889  20 0.022002   =20/909
#&gt; Yes     42 113 0.270968   =42/155
#&gt; Totals 931 133 0.058271  =62/1064
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.397030   0.784722 111
#&gt; 2                       max f2  0.226089   0.769690 176
#&gt; 3                 max f0point5  0.534689   0.831703  76
#&gt; 4                 max accuracy  0.397030   0.941729 111
#&gt; 5                max precision  0.966074   1.000000   0
#&gt; 6                   max recall  0.004457   1.000000 392
#&gt; 7              max specificity  0.966074   1.000000   0
#&gt; 8             max absolute_mcc  0.397030   0.754197 111
#&gt; 9   max min_per_class_accuracy  0.200154   0.858065 191
#&gt; 10 max mean_per_class_accuracy  0.226089   0.867174 176
#&gt; 11                     max tns  0.966074 909.000000   0
#&gt; 12                     max fns  0.966074 154.000000   0
#&gt; 13                     max fps  0.000921 909.000000 399
#&gt; 14                     max tps  0.004457 155.000000 392
#&gt; 15                     max tnr  0.966074   1.000000   0
#&gt; 16                     max fnr  0.966074   0.993548   0
#&gt; 17                     max fpr  0.000921   1.000000 399
#&gt; 18                     max tpr  0.004457   1.000000 392
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; H2OBinomialMetrics: stackedensemble
#&gt; ** Reported on validation data. **
#&gt; 
#&gt; MSE:  0.1018263
#&gt; RMSE:  0.3191023
#&gt; LogLoss:  0.3369415
#&gt; Mean Per-Class Error:  0.2114214
#&gt; AUC:  0.8687791
#&gt; AUCPR:  0.7345641
#&gt; Gini:  0.7375582
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error     Rate
#&gt; No     139   8 0.054422   =8/147
#&gt; Yes     14  24 0.368421   =14/38
#&gt; Totals 153  32 0.118919  =22/185
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.397362   0.685714  31
#&gt; 2                       max f2  0.093466   0.705645  95
#&gt; 3                 max f0point5  0.441675   0.739437  25
#&gt; 4                 max accuracy  0.441675   0.881081  25
#&gt; 5                max precision  0.928226   1.000000   0
#&gt; 6                   max recall  0.020605   1.000000 142
#&gt; 7              max specificity  0.928226   1.000000   0
#&gt; 8             max absolute_mcc  0.397362   0.616487  31
#&gt; 9   max min_per_class_accuracy  0.198716   0.763158  60
#&gt; 10 max mean_per_class_accuracy  0.307159   0.800841  42
#&gt; 11                     max tns  0.928226 147.000000   0
#&gt; 12                     max fns  0.928226  37.000000   0
#&gt; 13                     max fps  0.001722 147.000000 184
#&gt; 14                     max tps  0.020605  38.000000 142
#&gt; 15                     max tnr  0.928226   1.000000   0
#&gt; 16                     max fnr  0.928226   0.973684   0
#&gt; 17                     max fpr  0.001722   1.000000 184
#&gt; 18                     max tpr  0.020605   1.000000 142
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; H2OBinomialMetrics: stackedensemble
#&gt; ** Reported on cross-validation data. **
#&gt; ** 5-fold cross-validation on training data (Metrics computed for combined holdout predictions) **
#&gt; 
#&gt; MSE:  0.08511586
#&gt; RMSE:  0.2917462
#&gt; LogLoss:  0.3005205
#&gt; Mean Per-Class Error:  0.2174988
#&gt; AUC:  0.8409489
#&gt; AUCPR:  0.6117163
#&gt; Gini:  0.6818979
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error       Rate
#&gt; No     842  67 0.073707    =67/909
#&gt; Yes     56  99 0.361290    =56/155
#&gt; Totals 898 166 0.115602  =123/1064
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.303756   0.616822 129
#&gt; 2                       max f2  0.255081   0.650307 151
#&gt; 3                 max f0point5  0.409654   0.661376  88
#&gt; 4                 max accuracy  0.409654   0.898496  88
#&gt; 5                max precision  0.967912   1.000000   0
#&gt; 6                   max recall  0.000807   1.000000 399
#&gt; 7              max specificity  0.967912   1.000000   0
#&gt; 8             max absolute_mcc  0.303756   0.549295 129
#&gt; 9   max min_per_class_accuracy  0.151283   0.765677 218
#&gt; 10 max mean_per_class_accuracy  0.255081   0.792981 151
#&gt; 11                     max tns  0.967912 909.000000   0
#&gt; 12                     max fns  0.967912 154.000000   0
#&gt; 13                     max fps  0.000807 909.000000 399
#&gt; 14                     max tps  0.000807 155.000000 399
#&gt; 15                     max tnr  0.967912   1.000000   0
#&gt; 16                     max fnr  0.967912   0.993548   0
#&gt; 17                     max fpr  0.000807   1.000000 399
#&gt; 18                     max tpr  0.000807   1.000000 399
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; Cross-Validation Metrics Summary: 
#&gt;                mean       sd cv_1_valid cv_2_valid cv_3_valid cv_4_valid
#&gt; accuracy   0.895050 0.031160   0.883178   0.921951   0.910714   0.845771
#&gt; auc        0.842212 0.032837   0.808038   0.832912   0.883466   0.817300
#&gt; err        0.104950 0.031160   0.116822   0.078049   0.089286   0.154229
#&gt; err_count 22.200000 5.890671  25.000000  16.000000  20.000000  31.000000
#&gt; f0point5   0.659837 0.124024   0.600000   0.817308   0.650888   0.494792
#&gt;           cv_5_valid
#&gt; accuracy    0.913636
#&gt; auc         0.869344
#&gt; err         0.086364
#&gt; err_count  19.000000
#&gt; f0point5    0.736196
#&gt; 
#&gt; ---
#&gt;                         mean       sd cv_1_valid cv_2_valid cv_3_valid
#&gt; precision           0.673953 0.182720   0.583333   0.944444   0.628571
#&gt; r2                  0.315600 0.080050   0.265835   0.352766   0.366608
#&gt; recall              0.666315 0.082784   0.677419   0.531250   0.758621
#&gt; residual_deviance 127.092545 8.322162 136.014020 130.499450 113.498710
#&gt; rmse                0.291097 0.016294   0.301571   0.291995   0.267180
#&gt; specificity         0.935035 0.045099   0.918033   0.994220   0.933333
#&gt;                   cv_4_valid cv_5_valid
#&gt; precision           0.463415   0.750000
#&gt; r2                  0.200389   0.392404
#&gt; recall              0.678571   0.685714
#&gt; residual_deviance 127.378310 128.072220
#&gt; rmse                0.309632   0.285105
#&gt; specificity         0.872832   0.956757</code></pre>
</div>
</div>
</section><section id="depending-on-the-algorithm-the-output-will-be-different" class="level1" data-number="14"><h1 data-number="14">
<span class="header-section-number">14</span> Depending on the algorithm, the output will be different</h1>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-32_97158cc81d581960afbcb829b205d285">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1"></a><span class="co">#h2o.getModel("C:/Users/tiend/Documents/GitHub/ss23-bdml-tiend96/content/01_journal/Challenge4/04_Modeling/h20_models/DeepLearning_1_AutoML_1_20230524_195722")</span></span>
<span id="cb116-2"><a href="#cb116-2"></a></span>
<span id="cb116-3"><a href="#cb116-3"></a><span class="co"># Extracts and H2O model name by a position so can more easily use h2o.getModel()</span></span>
<span id="cb116-4"><a href="#cb116-4"></a><span class="fu">source</span>(<span class="st">"extract_h2o_model_name_by_position.R"</span>)</span>
<span id="cb116-5"><a href="#cb116-5"></a></span>
<span id="cb116-6"><a href="#cb116-6"></a>automl_models_h2o<span class="sc">@</span>leaderboard <span class="sc">%&gt;%</span> </span>
<span id="cb116-7"><a href="#cb116-7"></a>  <span class="fu">extract_h2o_model_name_by_position</span>(<span class="dv">6</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb116-8"><a href="#cb116-8"></a>  <span class="fu">h2o.getModel</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; StackedEnsemble_AllModels_1_AutoML_4_20230529_222536</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Model Details:
#&gt; ==============
#&gt; 
#&gt; H2OBinomialModel: stackedensemble
#&gt; Model ID:  StackedEnsemble_AllModels_1_AutoML_4_20230529_222536 
#&gt; Model Summary for Stacked Ensemble: 
#&gt;                                     key            value
#&gt; 1                     Stacking strategy cross_validation
#&gt; 2  Number of base models (used / total)              4/6
#&gt; 3      # GBM base models (used / total)              3/4
#&gt; 4      # GLM base models (used / total)              1/1
#&gt; 5      # DRF base models (used / total)              0/1
#&gt; 6                 Metalearner algorithm              GLM
#&gt; 7    Metalearner fold assignment scheme           Random
#&gt; 8                    Metalearner nfolds                5
#&gt; 9               Metalearner fold_column               NA
#&gt; 10   Custom metalearner hyperparameters             None
#&gt; 
#&gt; 
#&gt; H2OBinomialMetrics: stackedensemble
#&gt; ** Reported on training data. **
#&gt; 
#&gt; MSE:  0.06218974
#&gt; RMSE:  0.2493787
#&gt; LogLoss:  0.2277585
#&gt; Mean Per-Class Error:  0.1557614
#&gt; AUC:  0.9159303
#&gt; AUCPR:  0.8043056
#&gt; Gini:  0.8318606
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error      Rate
#&gt; No     878  31 0.034103   =31/909
#&gt; Yes     43 112 0.277419   =43/155
#&gt; Totals 921 143 0.069549  =74/1064
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.354185   0.751678 117
#&gt; 2                       max f2  0.221420   0.754491 169
#&gt; 3                 max f0point5  0.496098   0.813953  84
#&gt; 4                 max accuracy  0.363372   0.931391 114
#&gt; 5                max precision  0.973394   1.000000   0
#&gt; 6                   max recall  0.003016   1.000000 393
#&gt; 7              max specificity  0.973394   1.000000   0
#&gt; 8             max absolute_mcc  0.363372   0.712840 114
#&gt; 9   max min_per_class_accuracy  0.178541   0.852585 196
#&gt; 10 max mean_per_class_accuracy  0.221420   0.857497 169
#&gt; 11                     max tns  0.973394 909.000000   0
#&gt; 12                     max fns  0.973394 154.000000   0
#&gt; 13                     max fps  0.000511 909.000000 399
#&gt; 14                     max tps  0.003016 155.000000 393
#&gt; 15                     max tnr  0.973394   1.000000   0
#&gt; 16                     max fnr  0.973394   0.993548   0
#&gt; 17                     max fpr  0.000511   1.000000 399
#&gt; 18                     max tpr  0.003016   1.000000 393
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; H2OBinomialMetrics: stackedensemble
#&gt; ** Reported on validation data. **
#&gt; 
#&gt; MSE:  0.1022395
#&gt; RMSE:  0.3197491
#&gt; LogLoss:  0.3390916
#&gt; Mean Per-Class Error:  0.179198
#&gt; AUC:  0.8664518
#&gt; AUCPR:  0.7286859
#&gt; Gini:  0.7329037
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error     Rate
#&gt; No     133  14 0.095238  =14/147
#&gt; Yes     10  28 0.263158   =10/38
#&gt; Totals 143  42 0.129730  =24/185
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.293812   0.700000  41
#&gt; 2                       max f2  0.293812   0.721649  41
#&gt; 3                 max f0point5  0.523707   0.762712  19
#&gt; 4                 max accuracy  0.523707   0.881081  19
#&gt; 5                max precision  0.938311   1.000000   0
#&gt; 6                   max recall  0.017679   1.000000 141
#&gt; 7              max specificity  0.938311   1.000000   0
#&gt; 8             max absolute_mcc  0.293812   0.618764  41
#&gt; 9   max min_per_class_accuracy  0.173367   0.763158  60
#&gt; 10 max mean_per_class_accuracy  0.293812   0.820802  41
#&gt; 11                     max tns  0.938311 147.000000   0
#&gt; 12                     max fns  0.938311  37.000000   0
#&gt; 13                     max fps  0.000965 147.000000 184
#&gt; 14                     max tps  0.017679  38.000000 141
#&gt; 15                     max tnr  0.938311   1.000000   0
#&gt; 16                     max fnr  0.938311   0.973684   0
#&gt; 17                     max fpr  0.000965   1.000000 184
#&gt; 18                     max tpr  0.017679   1.000000 141
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; H2OBinomialMetrics: stackedensemble
#&gt; ** Reported on cross-validation data. **
#&gt; ** 5-fold cross-validation on training data (Metrics computed for combined holdout predictions) **
#&gt; 
#&gt; MSE:  0.08367052
#&gt; RMSE:  0.2892586
#&gt; LogLoss:  0.2975861
#&gt; Mean Per-Class Error:  0.2045956
#&gt; AUC:  0.8448029
#&gt; AUCPR:  0.6251117
#&gt; Gini:  0.6896057
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error       Rate
#&gt; No     842  67 0.073707    =67/909
#&gt; Yes     52 103 0.335484    =52/155
#&gt; Totals 894 170 0.111842  =119/1064
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.299326   0.633846 134
#&gt; 2                       max f2  0.299326   0.651899 134
#&gt; 3                 max f0point5  0.469463   0.660750  75
#&gt; 4                 max accuracy  0.469463   0.897556  75
#&gt; 5                max precision  0.972328   1.000000   0
#&gt; 6                   max recall  0.000570   1.000000 399
#&gt; 7              max specificity  0.972328   1.000000   0
#&gt; 8             max absolute_mcc  0.299326   0.568855 134
#&gt; 9   max min_per_class_accuracy  0.151086   0.771177 219
#&gt; 10 max mean_per_class_accuracy  0.299326   0.795404 134
#&gt; 11                     max tns  0.972328 909.000000   0
#&gt; 12                     max fns  0.972328 154.000000   0
#&gt; 13                     max fps  0.000570 909.000000 399
#&gt; 14                     max tps  0.000570 155.000000 399
#&gt; 15                     max tnr  0.972328   1.000000   0
#&gt; 16                     max fnr  0.972328   0.993548   0
#&gt; 17                     max fpr  0.000570   1.000000 399
#&gt; 18                     max tpr  0.000570   1.000000 399
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; Cross-Validation Metrics Summary: 
#&gt;                mean       sd cv_1_valid cv_2_valid cv_3_valid cv_4_valid
#&gt; accuracy   0.899324 0.028890   0.877828   0.883117   0.926702   0.934579
#&gt; auc        0.840640 0.039229   0.856786   0.861678   0.839321   0.871736
#&gt; err        0.100676 0.028890   0.122172   0.116883   0.073298   0.065421
#&gt; err_count 21.600000 6.949820  27.000000  27.000000  14.000000  14.000000
#&gt; f0point5   0.667424 0.114968   0.634921   0.679612   0.729167   0.800000
#&gt;           cv_5_valid
#&gt; accuracy    0.874396
#&gt; auc         0.773679
#&gt; err         0.125604
#&gt; err_count  26.000000
#&gt; f0point5    0.493421
#&gt; 
#&gt; ---
#&gt;                         mean        sd cv_1_valid cv_2_valid cv_3_valid
#&gt; precision           0.689985  0.157858   0.631579   0.682927   0.777778
#&gt; r2                  0.320849  0.073491   0.298845   0.357397   0.341775
#&gt; recall              0.619015  0.040995   0.648649   0.666667   0.583333
#&gt; residual_deviance 125.722520 21.623970 140.521360 154.553150 103.856930
#&gt; rmse                0.287437  0.023137   0.312626   0.309183   0.268917
#&gt; specificity         0.945506  0.035324   0.923913   0.931217   0.976048
#&gt;                   cv_4_valid cv_5_valid
#&gt; precision           0.888889   0.468750
#&gt; r2                  0.399854   0.206376
#&gt; recall              0.571429   0.625000
#&gt; residual_deviance 107.586716 122.094444
#&gt; rmse                0.261246   0.285212
#&gt; specificity         0.989247   0.907104</code></pre>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-33_5daf29ca9e903e47de4840647aca39b7">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1"></a><span class="co">#h2o.getModel("DeepLearning_1_AutoML_1_20230524_195722") %&gt;% </span></span>
<span id="cb119-2"><a href="#cb119-2"></a><span class="co">#  h2o.saveModel(path = "04_Modeling/h20_models/")</span></span>
<span id="cb119-3"><a href="#cb119-3"></a></span>
<span id="cb119-4"><a href="#cb119-4"></a><span class="co">#h2o.loadModel("04_Modeling/h20_models/DRF_1_AutoML_1_20230523_214315")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-34_51b30b15609738a3bc49e1f9eaaf27b4">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1"></a><span class="co"># Choose whatever model you want</span></span>
<span id="cb120-2"><a href="#cb120-2"></a>stacked_ensemble_h2o <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="st">"DeepLearning_1_AutoML_1_20230524_195722"</span>)</span>
<span id="cb120-3"><a href="#cb120-3"></a>stacked_ensemble_h2o</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Model Details:
#&gt; ==============
#&gt; 
#&gt; H2OBinomialModel: deeplearning
#&gt; Model ID:  DeepLearning_1_AutoML_1_20230524_195722 
#&gt; Status of Neuron Layers: predicting Attrition, 2-class classification, bernoulli distribution, CrossEntropy loss, 1.202 weights/biases, 25,7 KB, 11.998 training samples, mini-batch size 1
#&gt;   layer units      type dropout       l1       l2 mean_rate rate_rms momentum
#&gt; 1     1    95     Input  0.00 %       NA       NA        NA       NA       NA
#&gt; 2     2    10 Rectifier  0.00 % 0.000000 0.000000  0.170604 0.383497 0.000000
#&gt; 3     3    10 Rectifier  0.00 % 0.000000 0.000000  0.001880 0.001938 0.000000
#&gt; 4     4    10 Rectifier  0.00 % 0.000000 0.000000  0.001141 0.001270 0.000000
#&gt; 5     5     2   Softmax      NA 0.000000 0.000000  0.002060 0.001610 0.000000
#&gt;   mean_weight weight_rms mean_bias bias_rms
#&gt; 1          NA         NA        NA       NA
#&gt; 2   -0.000715   0.136980  0.509535 0.096139
#&gt; 3    0.012046   0.321003  0.999899 0.071591
#&gt; 4   -0.025861   0.294297  0.994634 0.048070
#&gt; 5    0.218097   1.498820 -0.001475 0.055308
#&gt; 
#&gt; 
#&gt; H2OBinomialMetrics: deeplearning
#&gt; ** Reported on training data. **
#&gt; ** Metrics reported on full training frame **
#&gt; 
#&gt; MSE:  0.06692099
#&gt; RMSE:  0.2586909
#&gt; LogLoss:  0.239369
#&gt; Mean Per-Class Error:  0.1758153
#&gt; AUC:  0.8989176
#&gt; AUCPR:  0.7409045
#&gt; Gini:  0.7978353
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error      Rate
#&gt; No     865  44 0.048405   =44/909
#&gt; Yes     47 108 0.303226   =47/155
#&gt; Totals 912 152 0.085526  =91/1064
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.333843   0.703583 133
#&gt; 2                       max f2  0.208831   0.705813 184
#&gt; 3                 max f0point5  0.520297   0.747748  88
#&gt; 4                 max accuracy  0.429840   0.918233  99
#&gt; 5                max precision  0.997492   1.000000   0
#&gt; 6                   max recall  0.002427   1.000000 395
#&gt; 7              max specificity  0.997492   1.000000   0
#&gt; 8             max absolute_mcc  0.333843   0.653659 133
#&gt; 9   max min_per_class_accuracy  0.145989   0.812903 219
#&gt; 10 max mean_per_class_accuracy  0.208831   0.826665 184
#&gt; 11                     max tns  0.997492 909.000000   0
#&gt; 12                     max fns  0.997492 154.000000   0
#&gt; 13                     max fps  0.000622 909.000000 399
#&gt; 14                     max tps  0.002427 155.000000 395
#&gt; 15                     max tnr  0.997492   1.000000   0
#&gt; 16                     max fnr  0.997492   0.993548   0
#&gt; 17                     max fpr  0.000622   1.000000 399
#&gt; 18                     max tpr  0.002427   1.000000 395
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; H2OBinomialMetrics: deeplearning
#&gt; ** Reported on validation data. **
#&gt; ** Metrics reported on full validation frame **
#&gt; 
#&gt; MSE:  0.1026735
#&gt; RMSE:  0.320427
#&gt; LogLoss:  0.3369246
#&gt; Mean Per-Class Error:  0.211869
#&gt; AUC:  0.867526
#&gt; AUCPR:  0.7008473
#&gt; Gini:  0.7350519
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error     Rate
#&gt; No     135  12 0.081633  =12/147
#&gt; Yes     13  25 0.342105   =13/38
#&gt; Totals 148  37 0.135135  =25/185
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.364261   0.666667  36
#&gt; 2                       max f2  0.134723   0.750000  67
#&gt; 3                 max f0point5  0.414085   0.696203  29
#&gt; 4                 max accuracy  0.414085   0.870270  29
#&gt; 5                max precision  0.994919   1.000000   0
#&gt; 6                   max recall  0.009348   1.000000 160
#&gt; 7              max specificity  0.994919   1.000000   0
#&gt; 8             max absolute_mcc  0.364261   0.582021  36
#&gt; 9   max min_per_class_accuracy  0.188734   0.789474  58
#&gt; 10 max mean_per_class_accuracy  0.134723   0.815163  67
#&gt; 11                     max tns  0.994919 147.000000   0
#&gt; 12                     max fns  0.994919  37.000000   0
#&gt; 13                     max fps  0.001045 147.000000 184
#&gt; 14                     max tps  0.009348  38.000000 160
#&gt; 15                     max tnr  0.994919   1.000000   0
#&gt; 16                     max fnr  0.994919   0.973684   0
#&gt; 17                     max fpr  0.001045   1.000000 184
#&gt; 18                     max tpr  0.009348   1.000000 160
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; H2OBinomialMetrics: deeplearning
#&gt; ** Reported on cross-validation data. **
#&gt; ** 5-fold cross-validation on training data (Metrics computed for combined holdout predictions) **
#&gt; 
#&gt; MSE:  0.09848229
#&gt; RMSE:  0.3138189
#&gt; LogLoss:  0.3390082
#&gt; Mean Per-Class Error:  0.2860144
#&gt; AUC:  0.7930871
#&gt; AUCPR:  0.4844503
#&gt; Gini:  0.5861741
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error       Rate
#&gt; No     823  86 0.094609    =86/909
#&gt; Yes     74  81 0.477419    =74/155
#&gt; Totals 897 167 0.150376  =160/1064
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.253595   0.503106 130
#&gt; 2                       max f2  0.109777   0.577889 232
#&gt; 3                 max f0point5  0.428265   0.551102  72
#&gt; 4                 max accuracy  0.487139   0.878759  54
#&gt; 5                max precision  0.976322   1.000000   0
#&gt; 6                   max recall  0.006325   1.000000 388
#&gt; 7              max specificity  0.976322   1.000000   0
#&gt; 8             max absolute_mcc  0.277464   0.416306 121
#&gt; 9   max min_per_class_accuracy  0.115044   0.722581 227
#&gt; 10 max mean_per_class_accuracy  0.177680   0.736446 171
#&gt; 11                     max tns  0.976322 909.000000   0
#&gt; 12                     max fns  0.976322 154.000000   0
#&gt; 13                     max fps  0.001078 909.000000 399
#&gt; 14                     max tps  0.006325 155.000000 388
#&gt; 15                     max tnr  0.976322   1.000000   0
#&gt; 16                     max fnr  0.976322   0.993548   0
#&gt; 17                     max fpr  0.001078   1.000000 399
#&gt; 18                     max tpr  0.006325   1.000000 388
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; Cross-Validation Metrics Summary: 
#&gt;                              mean       sd cv_1_valid cv_2_valid cv_3_valid
#&gt; accuracy                 0.854332 0.042995   0.784038   0.849765   0.877934
#&gt; auc                      0.792739 0.029235   0.768366   0.825173   0.788860
#&gt; err                      0.145668 0.042995   0.215962   0.150235   0.122066
#&gt; err_count               31.000000 9.165152  46.000000  32.000000  26.000000
#&gt; f0point5                 0.537624 0.114784   0.364807   0.550459   0.616438
#&gt; f1                       0.533413 0.068179   0.425000   0.600000   0.580645
#&gt; f2                       0.547807 0.085503   0.508982   0.659341   0.548781
#&gt; lift_top_group           4.965196 1.692645   4.896552   4.176471   6.264706
#&gt; logloss                  0.338977 0.021677   0.363298   0.334220   0.350682
#&gt; max_per_class_error      0.432354 0.119745   0.413793   0.294118   0.470588
#&gt; mcc                      0.466691 0.083075   0.322603   0.518896   0.513290
#&gt; mean_per_class_accuracy  0.735549 0.043726   0.700712   0.791489   0.736773
#&gt; mean_per_class_error     0.264451 0.043726   0.299288   0.208511   0.263227
#&gt; mse                      0.098475 0.006824   0.108420   0.099946   0.099735
#&gt; pr_auc                   0.494855 0.087045   0.374665   0.513816   0.582080
#&gt; precision                0.554030 0.176659   0.333333   0.521739   0.642857
#&gt; r2                       0.204180 0.076910   0.078163   0.254940   0.256512
#&gt; recall                   0.567646 0.119745   0.586207   0.705882   0.529412
#&gt; rmse                     0.313658 0.010822   0.329272   0.316142   0.315808
#&gt; specificity              0.903452 0.064388   0.815217   0.877095   0.944134
#&gt;                         cv_4_valid cv_5_valid
#&gt; accuracy                  0.896714   0.863208
#&gt; auc                       0.761078   0.820220
#&gt; err                       0.103286   0.136792
#&gt; err_count                22.000000  29.000000
#&gt; f0point5                  0.659341   0.497076
#&gt; f1                        0.521739   0.539683
#&gt; f2                        0.431655   0.590278
#&gt; lift_top_group            6.870968   2.617284
#&gt; logloss                   0.341224   0.305459
#&gt; max_per_class_error       0.612903   0.370370
#&gt; mcc                       0.510810   0.467854
#&gt; mean_per_class_accuracy   0.685307   0.763463
#&gt; mean_per_class_error      0.314693   0.236537
#&gt; mse                       0.093414   0.090860
#&gt; pr_auc                    0.564291   0.439422
#&gt; precision                 0.800000   0.472222
#&gt; r2                        0.248827   0.182457
#&gt; recall                    0.387097   0.629630
#&gt; rmse                      0.305638   0.301431
#&gt; specificity               0.983516   0.897297</code></pre>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1"></a>predictions <span class="ot">&lt;-</span> <span class="fu">h2o.predict</span>(stacked_ensemble_h2o, <span class="at">newdata =</span> <span class="fu">as.h2o</span>(test_tbl))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%
#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1"></a><span class="fu">typeof</span>(predictions)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "environment"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1"></a><span class="do">## [1] "environment"</span></span>
<span id="cb126-2"><a href="#cb126-2"></a></span>
<span id="cb126-3"><a href="#cb126-3"></a>predictions_tbl <span class="ot">&lt;-</span> predictions <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb126-4"><a href="#cb126-4"></a></span>
<span id="cb126-5"><a href="#cb126-5"></a>predictions_tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["predict"],"name":[1],"type":["fct"],"align":["left"]},{"label":["No"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Yes"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"No","2":"0.93853401","3":"0.061465992"},{"1":"No","2":"0.78413027","3":"0.215869730"},{"1":"No","2":"0.91225216","3":"0.087747842"},{"1":"No","2":"0.88638561","3":"0.113614389"},{"1":"No","2":"0.98663389","3":"0.013366112"},{"1":"No","2":"0.99398434","3":"0.006015660"},{"1":"No","2":"0.99561521","3":"0.004384787"},{"1":"Yes","2":"0.10982799","3":"0.890172010"},{"1":"Yes","2":"0.07982769","3":"0.920172310"},{"1":"No","2":"0.99702395","3":"0.002976045"},{"1":"No","2":"0.81466519","3":"0.185334809"},{"1":"No","2":"0.94931437","3":"0.050685633"},{"1":"No","2":"0.96691971","3":"0.033080287"},{"1":"No","2":"0.99723269","3":"0.002767305"},{"1":"No","2":"0.95103804","3":"0.048961960"},{"1":"No","2":"0.87581990","3":"0.124180104"},{"1":"No","2":"0.99795290","3":"0.002047104"},{"1":"No","2":"0.74955518","3":"0.250444821"},{"1":"No","2":"0.94040533","3":"0.059594669"},{"1":"No","2":"0.85433141","3":"0.145668594"},{"1":"No","2":"0.98045651","3":"0.019543486"},{"1":"Yes","2":"0.16749971","3":"0.832500291"},{"1":"No","2":"0.95919366","3":"0.040806337"},{"1":"No","2":"0.92232466","3":"0.077675342"},{"1":"No","2":"0.70569342","3":"0.294306579"},{"1":"No","2":"0.97525961","3":"0.024740391"},{"1":"No","2":"0.85861117","3":"0.141388825"},{"1":"No","2":"0.87724540","3":"0.122754598"},{"1":"No","2":"0.98628708","3":"0.013712924"},{"1":"No","2":"0.97386246","3":"0.026137537"},{"1":"No","2":"0.97141935","3":"0.028580646"},{"1":"No","2":"0.98268600","3":"0.017314000"},{"1":"No","2":"0.97886458","3":"0.021135423"},{"1":"No","2":"0.70011851","3":"0.299881493"},{"1":"No","2":"0.98441197","3":"0.015588026"},{"1":"Yes","2":"0.27195454","3":"0.728045458"},{"1":"No","2":"0.99304640","3":"0.006953603"},{"1":"No","2":"0.99794938","3":"0.002050622"},{"1":"No","2":"0.92761380","3":"0.072386200"},{"1":"No","2":"0.91238294","3":"0.087617064"},{"1":"No","2":"0.97386696","3":"0.026133036"},{"1":"No","2":"0.99659588","3":"0.003404121"},{"1":"No","2":"0.84737287","3":"0.152627132"},{"1":"No","2":"0.97620132","3":"0.023798676"},{"1":"No","2":"0.92150832","3":"0.078491680"},{"1":"No","2":"0.67869728","3":"0.321302722"},{"1":"No","2":"0.98887644","3":"0.011123557"},{"1":"No","2":"0.93336289","3":"0.066637113"},{"1":"No","2":"0.98404649","3":"0.015953510"},{"1":"No","2":"0.98460501","3":"0.015394992"},{"1":"No","2":"0.98825332","3":"0.011746680"},{"1":"No","2":"0.88511267","3":"0.114887333"},{"1":"Yes","2":"0.56482814","3":"0.435171860"},{"1":"No","2":"0.99231693","3":"0.007683073"},{"1":"No","2":"0.95922295","3":"0.040777050"},{"1":"No","2":"0.98049345","3":"0.019506552"},{"1":"No","2":"0.99346993","3":"0.006530068"},{"1":"No","2":"0.96972767","3":"0.030272334"},{"1":"No","2":"0.98935591","3":"0.010644086"},{"1":"No","2":"0.95536097","3":"0.044639026"},{"1":"No","2":"0.87695875","3":"0.123041250"},{"1":"No","2":"0.94217007","3":"0.057829934"},{"1":"No","2":"0.98794362","3":"0.012056376"},{"1":"No","2":"0.95073130","3":"0.049268701"},{"1":"No","2":"0.71649921","3":"0.283500788"},{"1":"No","2":"0.88979357","3":"0.110206434"},{"1":"No","2":"0.96823918","3":"0.031760824"},{"1":"No","2":"0.99736008","3":"0.002639918"},{"1":"No","2":"0.81008341","3":"0.189916590"},{"1":"No","2":"0.98037247","3":"0.019627525"},{"1":"No","2":"0.78847785","3":"0.211522153"},{"1":"No","2":"0.79376976","3":"0.206230244"},{"1":"No","2":"0.85212838","3":"0.147871624"},{"1":"No","2":"0.98527461","3":"0.014725389"},{"1":"No","2":"0.85630676","3":"0.143693237"},{"1":"No","2":"0.99847622","3":"0.001523779"},{"1":"No","2":"0.99457927","3":"0.005420731"},{"1":"No","2":"0.85132495","3":"0.148675046"},{"1":"No","2":"0.97871429","3":"0.021285709"},{"1":"No","2":"0.99363589","3":"0.006364108"},{"1":"No","2":"0.98991518","3":"0.010084815"},{"1":"No","2":"0.99871739","3":"0.001282609"},{"1":"No","2":"0.87676755","3":"0.123232446"},{"1":"No","2":"0.95974054","3":"0.040259463"},{"1":"No","2":"0.97831654","3":"0.021683458"},{"1":"No","2":"0.96326797","3":"0.036732029"},{"1":"No","2":"0.99233194","3":"0.007668055"},{"1":"No","2":"0.96523582","3":"0.034764177"},{"1":"No","2":"0.98996433","3":"0.010035666"},{"1":"No","2":"0.73595820","3":"0.264041798"},{"1":"Yes","2":"0.09400886","3":"0.905991144"},{"1":"No","2":"0.99812168","3":"0.001878316"},{"1":"No","2":"0.98466513","3":"0.015334872"},{"1":"No","2":"0.98218977","3":"0.017810231"},{"1":"No","2":"0.92333548","3":"0.076664516"},{"1":"No","2":"0.97926074","3":"0.020739260"},{"1":"No","2":"0.99402957","3":"0.005970427"},{"1":"No","2":"0.85497648","3":"0.145023525"},{"1":"No","2":"0.98967656","3":"0.010323440"},{"1":"No","2":"0.82334225","3":"0.176657747"},{"1":"No","2":"0.98624563","3":"0.013754370"},{"1":"Yes","2":"0.59804221","3":"0.401957792"},{"1":"No","2":"0.99046396","3":"0.009536042"},{"1":"No","2":"0.64543858","3":"0.354561417"},{"1":"No","2":"0.86809008","3":"0.131909917"},{"1":"No","2":"0.96481808","3":"0.035181916"},{"1":"No","2":"0.97600886","3":"0.023991144"},{"1":"No","2":"0.87273000","3":"0.127269997"},{"1":"No","2":"0.84164638","3":"0.158353618"},{"1":"Yes","2":"0.55069597","3":"0.449304030"},{"1":"No","2":"0.92322351","3":"0.076776490"},{"1":"Yes","2":"0.19850929","3":"0.801490714"},{"1":"No","2":"0.76977068","3":"0.230229320"},{"1":"No","2":"0.96304308","3":"0.036956917"},{"1":"No","2":"0.98748918","3":"0.012510823"},{"1":"No","2":"0.97980698","3":"0.020193017"},{"1":"Yes","2":"0.18700215","3":"0.812997845"},{"1":"Yes","2":"0.23619838","3":"0.763801615"},{"1":"No","2":"0.94021887","3":"0.059781128"},{"1":"No","2":"0.92490016","3":"0.075099837"},{"1":"No","2":"0.99634605","3":"0.003653954"},{"1":"No","2":"0.98874303","3":"0.011256965"},{"1":"No","2":"0.89899640","3":"0.101003605"},{"1":"Yes","2":"0.13937658","3":"0.860623423"},{"1":"No","2":"0.98084699","3":"0.019153010"},{"1":"Yes","2":"0.35642694","3":"0.643573057"},{"1":"No","2":"0.95421658","3":"0.045783419"},{"1":"No","2":"0.70624126","3":"0.293758739"},{"1":"No","2":"0.68561798","3":"0.314382020"},{"1":"No","2":"0.87981698","3":"0.120183023"},{"1":"No","2":"0.67579422","3":"0.324205783"},{"1":"No","2":"0.99625378","3":"0.003746216"},{"1":"No","2":"0.98125196","3":"0.018748038"},{"1":"No","2":"0.77075003","3":"0.229249973"},{"1":"No","2":"0.96970712","3":"0.030292884"},{"1":"No","2":"0.89803069","3":"0.101969309"},{"1":"No","2":"0.97522150","3":"0.024778496"},{"1":"No","2":"0.80661377","3":"0.193386231"},{"1":"No","2":"0.92945022","3":"0.070549779"},{"1":"No","2":"0.87856205","3":"0.121437948"},{"1":"Yes","2":"0.46811663","3":"0.531883371"},{"1":"No","2":"0.93537703","3":"0.064622965"},{"1":"No","2":"0.84035604","3":"0.159643956"},{"1":"No","2":"0.97434804","3":"0.025651962"},{"1":"Yes","2":"0.51698650","3":"0.483013496"},{"1":"No","2":"0.99559971","3":"0.004400291"},{"1":"No","2":"0.93051072","3":"0.069489277"},{"1":"No","2":"0.87540987","3":"0.124590134"},{"1":"Yes","2":"0.01141479","3":"0.988585206"},{"1":"No","2":"0.84083827","3":"0.159161732"},{"1":"No","2":"0.98343836","3":"0.016561637"},{"1":"No","2":"0.94345639","3":"0.056543609"},{"1":"Yes","2":"0.04746100","3":"0.952538996"},{"1":"No","2":"0.97809663","3":"0.021903365"},{"1":"No","2":"0.99077228","3":"0.009227718"},{"1":"No","2":"0.99064256","3":"0.009357441"},{"1":"No","2":"0.91955142","3":"0.080448578"},{"1":"Yes","2":"0.56375219","3":"0.436247805"},{"1":"No","2":"0.65756185","3":"0.342438148"},{"1":"No","2":"0.84901918","3":"0.150980822"},{"1":"No","2":"0.96885826","3":"0.031141739"},{"1":"No","2":"0.72729981","3":"0.272700193"},{"1":"Yes","2":"0.49255350","3":"0.507446499"},{"1":"No","2":"0.91308305","3":"0.086916954"},{"1":"No","2":"0.95990355","3":"0.040096445"},{"1":"No","2":"0.94074813","3":"0.059251870"},{"1":"No","2":"0.94134393","3":"0.058656073"},{"1":"Yes","2":"0.30050379","3":"0.699496213"},{"1":"No","2":"0.92666989","3":"0.073330113"},{"1":"No","2":"0.97636119","3":"0.023638815"},{"1":"Yes","2":"0.32031173","3":"0.679688267"},{"1":"No","2":"0.75055663","3":"0.249443374"},{"1":"No","2":"0.67524474","3":"0.324755265"},{"1":"No","2":"0.95880103","3":"0.041198975"},{"1":"Yes","2":"0.63262663","3":"0.367373369"},{"1":"No","2":"0.87853367","3":"0.121466330"},{"1":"No","2":"0.98722811","3":"0.012771889"},{"1":"No","2":"0.98480689","3":"0.015193108"},{"1":"No","2":"0.76221411","3":"0.237785895"},{"1":"No","2":"0.93356576","3":"0.066434239"},{"1":"No","2":"0.98482650","3":"0.015173496"},{"1":"Yes","2":"0.02812417","3":"0.971875825"},{"1":"No","2":"0.91579842","3":"0.084201579"},{"1":"No","2":"0.99363312","3":"0.006366877"},{"1":"No","2":"0.98616781","3":"0.013832187"},{"1":"Yes","2":"0.17739333","3":"0.822606671"},{"1":"Yes","2":"0.62852012","3":"0.371479879"},{"1":"No","2":"0.94955079","3":"0.050449211"},{"1":"No","2":"0.71351032","3":"0.286489676"},{"1":"No","2":"0.99461589","3":"0.005384114"},{"1":"No","2":"0.92970385","3":"0.070296147"},{"1":"No","2":"0.93632014","3":"0.063679859"},{"1":"No","2":"0.98413694","3":"0.015863063"},{"1":"Yes","2":"0.63473003","3":"0.365269973"},{"1":"No","2":"0.78232279","3":"0.217677208"},{"1":"No","2":"0.64097642","3":"0.359023583"},{"1":"No","2":"0.94716468","3":"0.052835324"},{"1":"No","2":"0.98460109","3":"0.015398914"},{"1":"No","2":"0.84599272","3":"0.154007284"},{"1":"No","2":"0.63803615","3":"0.361963846"},{"1":"No","2":"0.98028261","3":"0.019717387"},{"1":"No","2":"0.98620728","3":"0.013792720"},{"1":"No","2":"0.73040245","3":"0.269597550"},{"1":"No","2":"0.98313554","3":"0.016864461"},{"1":"No","2":"0.91812351","3":"0.081876486"},{"1":"No","2":"0.95657273","3":"0.043427266"},{"1":"Yes","2":"0.24519919","3":"0.754800805"},{"1":"No","2":"0.98188616","3":"0.018113842"},{"1":"No","2":"0.97495940","3":"0.025040602"},{"1":"No","2":"0.96736086","3":"0.032639139"},{"1":"No","2":"0.91404417","3":"0.085955826"},{"1":"No","2":"0.76074406","3":"0.239255936"},{"1":"No","2":"0.96848149","3":"0.031518506"},{"1":"No","2":"0.67955703","3":"0.320442966"},{"1":"No","2":"0.99156437","3":"0.008435630"},{"1":"No","2":"0.97586292","3":"0.024137078"},{"1":"No","2":"0.77043474","3":"0.229565257"},{"1":"No","2":"0.96015605","3":"0.039843946"},{"1":"No","2":"0.89143362","3":"0.108566379"},{"1":"No","2":"0.98563642","3":"0.014363578"},{"1":"No","2":"0.93733609","3":"0.062663913"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-35_c9ddc83f7ee72ebd54a4953051b943c2">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1"></a>deep_learning_h2o <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="st">"DeepLearning_1_AutoML_1_20230524_195722"</span>)</span>
<span id="cb127-2"><a href="#cb127-2"></a></span>
<span id="cb127-3"><a href="#cb127-3"></a><span class="co"># To see all possible parameters</span></span>
<span id="cb127-4"><a href="#cb127-4"></a>?h2o.deeplearning</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; starte den http Server für die Hilfe fertig</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1"></a><span class="co"># to get all paramteres</span></span>
<span id="cb129-2"><a href="#cb129-2"></a>deep_learning_h2o<span class="sc">@</span>allparameters</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; $model_id
#&gt; [1] "DeepLearning_1_AutoML_1_20230524_195722"
#&gt; 
#&gt; $nfolds
#&gt; [1] 5
#&gt; 
#&gt; $keep_cross_validation_models
#&gt; [1] FALSE
#&gt; 
#&gt; $keep_cross_validation_predictions
#&gt; [1] TRUE
#&gt; 
#&gt; $keep_cross_validation_fold_assignment
#&gt; [1] FALSE
#&gt; 
#&gt; $fold_assignment
#&gt; [1] "Modulo"
#&gt; 
#&gt; $ignore_const_cols
#&gt; [1] TRUE
#&gt; 
#&gt; $score_each_iteration
#&gt; [1] FALSE
#&gt; 
#&gt; $balance_classes
#&gt; [1] FALSE
#&gt; 
#&gt; $max_after_balance_size
#&gt; [1] 5
#&gt; 
#&gt; $max_confusion_matrix_size
#&gt; [1] 20
#&gt; 
#&gt; $overwrite_with_best_model
#&gt; [1] FALSE
#&gt; 
#&gt; $use_all_factor_levels
#&gt; [1] TRUE
#&gt; 
#&gt; $standardize
#&gt; [1] TRUE
#&gt; 
#&gt; $activation
#&gt; [1] "Rectifier"
#&gt; 
#&gt; $hidden
#&gt; [1] 10 10 10
#&gt; 
#&gt; $epochs
#&gt; [1] 10.3602
#&gt; 
#&gt; $train_samples_per_iteration
#&gt; [1] -2
#&gt; 
#&gt; $target_ratio_comm_to_comp
#&gt; [1] 0.05
#&gt; 
#&gt; $seed
#&gt; [1] "8785999559547214598"
#&gt; 
#&gt; $adaptive_rate
#&gt; [1] TRUE
#&gt; 
#&gt; $rho
#&gt; [1] 0.99
#&gt; 
#&gt; $epsilon
#&gt; [1] 1e-08
#&gt; 
#&gt; $rate
#&gt; [1] 0.005
#&gt; 
#&gt; $rate_annealing
#&gt; [1] 1e-06
#&gt; 
#&gt; $rate_decay
#&gt; [1] 1
#&gt; 
#&gt; $momentum_start
#&gt; [1] 0
#&gt; 
#&gt; $momentum_ramp
#&gt; [1] 1e+06
#&gt; 
#&gt; $momentum_stable
#&gt; [1] 0
#&gt; 
#&gt; $nesterov_accelerated_gradient
#&gt; [1] TRUE
#&gt; 
#&gt; $input_dropout_ratio
#&gt; [1] 0
#&gt; 
#&gt; $l1
#&gt; [1] 0
#&gt; 
#&gt; $l2
#&gt; [1] 0
#&gt; 
#&gt; $max_w2
#&gt; [1] 3.402823e+38
#&gt; 
#&gt; $initial_weight_distribution
#&gt; [1] "UniformAdaptive"
#&gt; 
#&gt; $initial_weight_scale
#&gt; [1] 1
#&gt; 
#&gt; $loss
#&gt; [1] "Automatic"
#&gt; 
#&gt; $distribution
#&gt; [1] "bernoulli"
#&gt; 
#&gt; $quantile_alpha
#&gt; [1] 0.5
#&gt; 
#&gt; $tweedie_power
#&gt; [1] 1.5
#&gt; 
#&gt; $huber_alpha
#&gt; [1] 0.9
#&gt; 
#&gt; $score_interval
#&gt; [1] 5
#&gt; 
#&gt; $score_training_samples
#&gt; [1] 10000
#&gt; 
#&gt; $score_validation_samples
#&gt; [1] 0
#&gt; 
#&gt; $score_duty_cycle
#&gt; [1] 0.1
#&gt; 
#&gt; $classification_stop
#&gt; [1] 0
#&gt; 
#&gt; $regression_stop
#&gt; [1] 1e-06
#&gt; 
#&gt; $stopping_rounds
#&gt; [1] 0
#&gt; 
#&gt; $stopping_metric
#&gt; [1] "logloss"
#&gt; 
#&gt; $stopping_tolerance
#&gt; [1] 0.03065697
#&gt; 
#&gt; $max_runtime_secs
#&gt; [1] 10.584
#&gt; 
#&gt; $score_validation_sampling
#&gt; [1] "Uniform"
#&gt; 
#&gt; $diagnostics
#&gt; [1] TRUE
#&gt; 
#&gt; $fast_mode
#&gt; [1] TRUE
#&gt; 
#&gt; $force_load_balance
#&gt; [1] TRUE
#&gt; 
#&gt; $variable_importances
#&gt; [1] TRUE
#&gt; 
#&gt; $replicate_training_data
#&gt; [1] TRUE
#&gt; 
#&gt; $single_node_mode
#&gt; [1] FALSE
#&gt; 
#&gt; $shuffle_training_data
#&gt; [1] FALSE
#&gt; 
#&gt; $missing_values_handling
#&gt; [1] "MeanImputation"
#&gt; 
#&gt; $quiet_mode
#&gt; [1] FALSE
#&gt; 
#&gt; $autoencoder
#&gt; [1] FALSE
#&gt; 
#&gt; $sparse
#&gt; [1] FALSE
#&gt; 
#&gt; $col_major
#&gt; [1] FALSE
#&gt; 
#&gt; $average_activation
#&gt; [1] 0
#&gt; 
#&gt; $sparsity_beta
#&gt; [1] 0
#&gt; 
#&gt; $max_categorical_features
#&gt; [1] 2147483647
#&gt; 
#&gt; $reproducible
#&gt; [1] FALSE
#&gt; 
#&gt; $export_weights_and_biases
#&gt; [1] FALSE
#&gt; 
#&gt; $mini_batch_size
#&gt; [1] 1
#&gt; 
#&gt; $categorical_encoding
#&gt; [1] "OneHotInternal"
#&gt; 
#&gt; $elastic_averaging
#&gt; [1] FALSE
#&gt; 
#&gt; $elastic_averaging_moving_rate
#&gt; [1] 0.9
#&gt; 
#&gt; $elastic_averaging_regularization
#&gt; [1] 0.001
#&gt; 
#&gt; $auc_type
#&gt; [1] "AUTO"
#&gt; 
#&gt; $x
#&gt;  [1] "JobRole"                  "EducationField"          
#&gt;  [3] "JobLevel"                 "Education"               
#&gt;  [5] "EnvironmentSatisfaction"  "JobInvolvement"          
#&gt;  [7] "JobSatisfaction"          "RelationshipSatisfaction"
#&gt;  [9] "StockOptionLevel"         "WorkLifeBalance"         
#&gt; [11] "Department"               "BusinessTravel"          
#&gt; [13] "MaritalStatus"            "Gender"                  
#&gt; [15] "OverTime"                 "PerformanceRating"       
#&gt; [17] "Age"                      "DailyRate"               
#&gt; [19] "DistanceFromHome"         "EmployeeNumber"          
#&gt; [21] "HourlyRate"               "MonthlyIncome"           
#&gt; [23] "MonthlyRate"              "NumCompaniesWorked"      
#&gt; [25] "PercentSalaryHike"        "TotalWorkingYears"       
#&gt; [27] "TrainingTimesLastYear"    "YearsAtCompany"          
#&gt; [29] "YearsInCurrentRole"       "YearsSinceLastPromotion" 
#&gt; [31] "YearsWithCurrManager"    
#&gt; 
#&gt; $y
#&gt; [1] "Attrition"</code></pre>
</div>
</div>
<p>#Challenge 4 #1. Load the training &amp; test dataset</p>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-36_cf0f6d39f7f2689d1242ce8c5bb8cc89">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1"></a>product_backorder_tbl          <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"product_backorders.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Rows: 19053 Columns: 23
#&gt; ── Column specification ────────────────────────────────────────────────────────
#&gt; Delimiter: ","
#&gt; chr  (7): potential_issue, deck_risk, oe_constraint, ppap_risk, stop_auto_bu...
#&gt; dbl (16): sku, national_inv, lead_time, in_transit_qty, forecast_3_month, fo...
#&gt; 
#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.
#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>#2. Specifiy the response and predictor variables</p>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-37_0884aa0483f1f8a69159d791969d93fe">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1"></a><span class="fu">set.seed</span>(<span class="at">seed =</span> <span class="dv">1113</span>)</span>
<span id="cb133-2"><a href="#cb133-2"></a>split_obj                       <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">initial_split</span>(product_backorder_tbl, <span class="at">prop =</span> <span class="fl">0.85</span>)</span>
<span id="cb133-3"><a href="#cb133-3"></a>train_readable_tbl              <span class="ot">&lt;-</span> <span class="fu">training</span>(split_obj)</span>
<span id="cb133-4"><a href="#cb133-4"></a>test_readable_tbl               <span class="ot">&lt;-</span> <span class="fu">testing</span>(split_obj)</span>
<span id="cb133-5"><a href="#cb133-5"></a></span>
<span id="cb133-6"><a href="#cb133-6"></a>recipe_obj <span class="ot">&lt;-</span> <span class="fu">recipe</span>(went_on_backorder <span class="sc">~</span>., <span class="at">data =</span> train_readable_tbl) <span class="sc">%&gt;%</span> </span>
<span id="cb133-7"><a href="#cb133-7"></a>    <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb133-8"><a href="#cb133-8"></a>    <span class="fu">prep</span>()</span>
<span id="cb133-9"><a href="#cb133-9"></a></span>
<span id="cb133-10"><a href="#cb133-10"></a>train_tbl <span class="ot">&lt;-</span> <span class="fu">bake</span>(recipe_obj, <span class="at">new_data =</span> train_readable_tbl)</span>
<span id="cb133-11"><a href="#cb133-11"></a>test_tbl  <span class="ot">&lt;-</span> <span class="fu">bake</span>(recipe_obj, <span class="at">new_data =</span> test_readable_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>#Modeling</p>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-38_14ab36d482e05bbae47598ec9557ba89">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1"></a><span class="fu">h2o.init</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  Connection successful!
#&gt; 
#&gt; R is connected to the H2O cluster: 
#&gt;     H2O cluster uptime:         29 minutes 8 seconds 
#&gt;     H2O cluster timezone:       Europe/Berlin 
#&gt;     H2O data parsing timezone:  UTC 
#&gt;     H2O cluster version:        3.40.0.1 
#&gt;     H2O cluster version age:    3 months and 21 days 
#&gt;     H2O cluster name:           H2O_started_from_R_tiend_ham688 
#&gt;     H2O cluster total nodes:    1 
#&gt;     H2O cluster total memory:   3.72 GB 
#&gt;     H2O cluster total cores:    12 
#&gt;     H2O cluster allowed cores:  12 
#&gt;     H2O cluster healthy:        TRUE 
#&gt;     H2O Connection ip:          localhost 
#&gt;     H2O Connection port:        54321 
#&gt;     H2O Connection proxy:       NA 
#&gt;     H2O Internal Security:      FALSE 
#&gt;     R Version:                  R version 4.2.3 (2023-03-15 ucrt)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning in h2o.clusterInfo(): 
#&gt; Your H2O cluster version is (3 months and 21 days) old. There may be a newer version available.
#&gt; Please download and install the latest version from: https://h2o-release.s3.amazonaws.com/h2o/latest_stable.html</code></pre>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1"></a><span class="co"># Split data into a training and a validation data frame</span></span>
<span id="cb137-2"><a href="#cb137-2"></a><span class="co"># Setting the seed is just for reproducability</span></span>
<span id="cb137-3"><a href="#cb137-3"></a>split_h2o <span class="ot">&lt;-</span> <span class="fu">h2o.splitFrame</span>(<span class="fu">as.h2o</span>(train_tbl), <span class="at">ratios =</span> <span class="fu">c</span>(<span class="fl">0.85</span>), <span class="at">seed =</span> <span class="dv">1234</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1"></a>train_h2o <span class="ot">&lt;-</span> split_h2o[[<span class="dv">1</span>]]</span>
<span id="cb139-2"><a href="#cb139-2"></a>valid_h2o <span class="ot">&lt;-</span> split_h2o[[<span class="dv">2</span>]]</span>
<span id="cb139-3"><a href="#cb139-3"></a>test_h2o  <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(test_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1"></a><span class="co"># Set the target and predictors</span></span>
<span id="cb141-2"><a href="#cb141-2"></a>y <span class="ot">&lt;-</span> <span class="st">"went_on_backorder"</span></span>
<span id="cb141-3"><a href="#cb141-3"></a>x <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(train_h2o), y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="run-automl-specifying-the-stopping-criterion" class="level1" data-number="15"><h1 data-number="15">
<span class="header-section-number">15</span> 3. Run AutoML specifying the stopping criterion</h1>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-39_efd77d57e9a88c774d87b5e4ac16a89a">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1"></a>automl_models_h2o <span class="ot">&lt;-</span> <span class="fu">h2o.automl</span>(</span>
<span id="cb142-2"><a href="#cb142-2"></a>  <span class="at">x =</span> x,</span>
<span id="cb142-3"><a href="#cb142-3"></a>  <span class="at">y =</span> y,</span>
<span id="cb142-4"><a href="#cb142-4"></a>  <span class="at">training_frame    =</span> train_h2o,</span>
<span id="cb142-5"><a href="#cb142-5"></a>  <span class="at">validation_frame  =</span> valid_h2o,</span>
<span id="cb142-6"><a href="#cb142-6"></a>  <span class="at">leaderboard_frame =</span> test_h2o,</span>
<span id="cb142-7"><a href="#cb142-7"></a>  <span class="at">max_runtime_secs  =</span> <span class="dv">30</span>,</span>
<span id="cb142-8"><a href="#cb142-8"></a>  <span class="at">nfolds            =</span> <span class="dv">5</span> </span>
<span id="cb142-9"><a href="#cb142-9"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |==                                                                    |   3%
#&gt; 22:26:32.275: User specified a validation frame with cross-validation still enabled. Please note that the models will still be validated using cross-validation only, the validation frame will be used to provide purely informative validation metrics on the trained models.
#&gt; 22:26:32.277: AutoML: XGBoost is not available; skipping it.
  |                                                                            
  |========                                                              |  11%
  |                                                                            
  |=============                                                         |  18%
  |                                                                            
  |==================                                                    |  25%
  |                                                                            
  |=======================                                               |  32%
  |                                                                            
  |============================                                          |  40%
  |                                                                            
  |=================================                                     |  46%
  |                                                                            
  |=====================================                                 |  53%
  |                                                                            
  |==========================================                            |  60%
  |                                                                            
  |===============================================                       |  67%
  |                                                                            
  |====================================================                  |  74%
  |                                                                            
  |=========================================================             |  82%
  |                                                                            
  |================================================================      |  91%
  |                                                                            
  |===================================================================== |  98%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
</div>
</section><section id="view-the-leaderboard" class="level1" data-number="16"><h1 data-number="16">
<span class="header-section-number">16</span> 4. View the leaderboard</h1>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-40_8a4ff2d70e20413e99ab8a59b0b66c41">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1"></a><span class="fu">typeof</span>(automl_models_h2o)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "S4"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1"></a><span class="do">## "S4"</span></span>
<span id="cb146-2"><a href="#cb146-2"></a></span>
<span id="cb146-3"><a href="#cb146-3"></a><span class="fu">slotNames</span>(automl_models_h2o)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "project_name"   "leader"         "leaderboard"    "event_log"     
#&gt; [5] "modeling_steps" "training_info"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1"></a><span class="do">## [1] "project_name"   "leader"         "leaderboard"    "event_log"      "modeling_steps" "training_info" </span></span>
<span id="cb148-2"><a href="#cb148-2"></a></span>
<span id="cb148-3"><a href="#cb148-3"></a>automl_models_h2o<span class="sc">@</span>leaderboard</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;                                                  model_id       auc   logloss
#&gt; 1    StackedEnsemble_AllModels_2_AutoML_5_20230529_222632 0.9494713 0.1745690
#&gt; 2    StackedEnsemble_AllModels_1_AutoML_5_20230529_222632 0.9486382 0.1753040
#&gt; 3 StackedEnsemble_BestOfFamily_3_AutoML_5_20230529_222632 0.9480953 0.1761551
#&gt; 4                          GBM_3_AutoML_5_20230529_222632 0.9477224 0.1783497
#&gt; 5                          GBM_2_AutoML_5_20230529_222632 0.9475894 0.1781328
#&gt; 6                          GBM_4_AutoML_5_20230529_222632 0.9473165 0.1786297
#&gt;       aucpr mean_per_class_error      rmse        mse
#&gt; 1 0.7420452            0.1620090 0.2287572 0.05232986
#&gt; 2 0.7404240            0.1657728 0.2290282 0.05245390
#&gt; 3 0.7418812            0.1525689 0.2289615 0.05242337
#&gt; 4 0.7483486            0.1436028 0.2298426 0.05282762
#&gt; 5 0.7495287            0.1650536 0.2303489 0.05306062
#&gt; 6 0.7362912            0.1741573 0.2303375 0.05305536
#&gt; 
#&gt; [16 rows x 7 columns]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1"></a><span class="do">##                                              model_id       auc   logloss     aucpr mean_per_class_error      rmse        mse</span></span>
<span id="cb150-2"><a href="#cb150-2"></a><span class="do">## 1 StackedEnsemble_BestOfFamily_AutoML_20200820_190823 0.8585439 0.2992854 0.5869929            0.2406915 0.2978416 0.08870964</span></span>
<span id="cb150-3"><a href="#cb150-3"></a><span class="do">## 2          GBM_grid__1_AutoML_20200820_190823_model_3 0.8494016 0.3137896 0.5165541            0.2386968 0.3098134 0.09598435</span></span>
<span id="cb150-4"><a href="#cb150-4"></a><span class="do">## 3 DeepLearning_grid__1_AutoML_20200820_190823_model_1 0.8479056 0.3066365 0.6154288            0.2583112 0.3071528 0.09434283</span></span>
<span id="cb150-5"><a href="#cb150-5"></a><span class="do">## 4      XGBoost_grid__1_AutoML_20200820_190823_model_5 0.8439162 0.3057109 0.5299331            0.2061170 0.3071419 0.09433613</span></span>
<span id="cb150-6"><a href="#cb150-6"></a><span class="do">## 5    StackedEnsemble_AllModels_AutoML_20200820_190823 0.8425864 0.3211612 0.5205591            0.2539894 0.3107399 0.09655928</span></span>
<span id="cb150-7"><a href="#cb150-7"></a><span class="do">## 6      XGBoost_grid__1_AutoML_20200820_190823_model_6 0.8257979 0.3211936 0.5009608            0.2536569 0.3111129 0.09679122</span></span>
<span id="cb150-8"><a href="#cb150-8"></a><span class="do">##</span></span>
<span id="cb150-9"><a href="#cb150-9"></a><span class="do">## [30 rows x 7 columns] </span></span>
<span id="cb150-10"><a href="#cb150-10"></a></span>
<span id="cb150-11"><a href="#cb150-11"></a>automl_models_h2o<span class="sc">@</span>leader</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Model Details:
#&gt; ==============
#&gt; 
#&gt; H2OBinomialModel: stackedensemble
#&gt; Model ID:  StackedEnsemble_AllModels_2_AutoML_5_20230529_222632 
#&gt; Model Summary for Stacked Ensemble: 
#&gt;                                          key            value
#&gt; 1                          Stacking strategy cross_validation
#&gt; 2       Number of base models (used / total)              6/9
#&gt; 3           # GBM base models (used / total)              3/5
#&gt; 4           # DRF base models (used / total)              2/2
#&gt; 5  # DeepLearning base models (used / total)              0/1
#&gt; 6           # GLM base models (used / total)              1/1
#&gt; 7                      Metalearner algorithm              GLM
#&gt; 8         Metalearner fold assignment scheme           Random
#&gt; 9                         Metalearner nfolds                5
#&gt; 10                   Metalearner fold_column               NA
#&gt; 11        Custom metalearner hyperparameters             None
#&gt; 
#&gt; 
#&gt; H2OBinomialMetrics: stackedensemble
#&gt; ** Reported on training data. **
#&gt; 
#&gt; MSE:  0.02498378
#&gt; RMSE:  0.1580626
#&gt; LogLoss:  0.09347099
#&gt; Mean Per-Class Error:  0.07494071
#&gt; AUC:  0.9911699
#&gt; AUCPR:  0.949051
#&gt; Gini:  0.9823398
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;          No  Yes    Error       Rate
#&gt; No     8646  144 0.016382  =144/8790
#&gt; Yes     161 1045 0.133499  =161/1206
#&gt; Totals 8807 1189 0.030512  =305/9996
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold       value idx
#&gt; 1                       max f1  0.443668    0.872651 171
#&gt; 2                       max f2  0.267591    0.898512 222
#&gt; 3                 max f0point5  0.586138    0.906551 134
#&gt; 4                 max accuracy  0.489437    0.970188 158
#&gt; 5                max precision  0.980577    1.000000   0
#&gt; 6                   max recall  0.024387    1.000000 347
#&gt; 7              max specificity  0.980577    1.000000   0
#&gt; 8             max absolute_mcc  0.486149    0.856080 159
#&gt; 9   max min_per_class_accuracy  0.232494    0.949420 233
#&gt; 10 max mean_per_class_accuracy  0.221009    0.951446 236
#&gt; 11                     max tns  0.980577 8790.000000   0
#&gt; 12                     max fns  0.980577 1203.000000   0
#&gt; 13                     max fps  0.000136 8790.000000 399
#&gt; 14                     max tps  0.024387 1206.000000 347
#&gt; 15                     max tnr  0.980577    1.000000   0
#&gt; 16                     max fnr  0.980577    0.997512   0
#&gt; 17                     max fpr  0.000136    1.000000 399
#&gt; 18                     max tpr  0.024387    1.000000 347
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; H2OBinomialMetrics: stackedensemble
#&gt; ** Reported on validation data. **
#&gt; 
#&gt; MSE:  0.04910621
#&gt; RMSE:  0.2215992
#&gt; LogLoss:  0.1655987
#&gt; Mean Per-Class Error:  0.1307269
#&gt; AUC:  0.95272
#&gt; AUCPR:  0.7587615
#&gt; Gini:  0.90544
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;          No Yes    Error       Rate
#&gt; No     1991 113 0.053707  =113/2104
#&gt; Yes      59 225 0.207746    =59/284
#&gt; Totals 2050 338 0.072027  =172/2388
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold       value idx
#&gt; 1                       max f1  0.281477    0.723473 198
#&gt; 2                       max f2  0.171730    0.798212 244
#&gt; 3                 max f0point5  0.535717    0.740582 128
#&gt; 4                 max accuracy  0.535717    0.933417 128
#&gt; 5                max precision  0.966055    1.000000   0
#&gt; 6                   max recall  0.001799    1.000000 392
#&gt; 7              max specificity  0.966055    1.000000   0
#&gt; 8             max absolute_mcc  0.281477    0.685843 198
#&gt; 9   max min_per_class_accuracy  0.149576    0.894366 254
#&gt; 10 max mean_per_class_accuracy  0.149576    0.898704 254
#&gt; 11                     max tns  0.966055 2104.000000   0
#&gt; 12                     max fns  0.966055  283.000000   0
#&gt; 13                     max fps  0.000109 2104.000000 399
#&gt; 14                     max tps  0.001799  284.000000 392
#&gt; 15                     max tnr  0.966055    1.000000   0
#&gt; 16                     max fnr  0.966055    0.996479   0
#&gt; 17                     max fpr  0.000109    1.000000 399
#&gt; 18                     max tpr  0.001799    1.000000 392
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; H2OBinomialMetrics: stackedensemble
#&gt; ** Reported on cross-validation data. **
#&gt; ** 5-fold cross-validation on training data (Metrics computed for combined holdout predictions) **
#&gt; 
#&gt; MSE:  0.04964806
#&gt; RMSE:  0.2228184
#&gt; LogLoss:  0.1666878
#&gt; Mean Per-Class Error:  0.1503574
#&gt; AUC:  0.9536507
#&gt; AUCPR:  0.7552905
#&gt; Gini:  0.9073015
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;           No  Yes    Error        Rate
#&gt; No     11615  554 0.045526  =554/12169
#&gt; Yes      418 1220 0.255189   =418/1638
#&gt; Totals 12033 1774 0.070399  =972/13807
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold        value idx
#&gt; 1                       max f1  0.363556     0.715123 198
#&gt; 2                       max f2  0.128830     0.781334 283
#&gt; 3                 max f0point5  0.640703     0.734549 113
#&gt; 4                 max accuracy  0.465968     0.932788 164
#&gt; 5                max precision  0.981750     1.000000   0
#&gt; 6                   max recall  0.000102     1.000000 399
#&gt; 7              max specificity  0.981750     1.000000   0
#&gt; 8             max absolute_mcc  0.363556     0.675733 198
#&gt; 9   max min_per_class_accuracy  0.120901     0.889499 287
#&gt; 10 max mean_per_class_accuracy  0.128830     0.890144 283
#&gt; 11                     max tns  0.981750 12169.000000   0
#&gt; 12                     max fns  0.981750  1636.000000   0
#&gt; 13                     max fps  0.000102 12169.000000 399
#&gt; 14                     max tps  0.000102  1638.000000 399
#&gt; 15                     max tnr  0.981750     1.000000   0
#&gt; 16                     max fnr  0.981750     0.998779   0
#&gt; 17                     max fpr  0.000102     1.000000 399
#&gt; 18                     max tpr  0.000102     1.000000 399
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; Cross-Validation Metrics Summary: 
#&gt;                 mean        sd cv_1_valid cv_2_valid cv_3_valid cv_4_valid
#&gt; accuracy    0.930918  0.004082   0.936265   0.927133   0.934159   0.927594
#&gt; auc         0.953698  0.004740   0.955990   0.951231   0.955840   0.946714
#&gt; err         0.069082  0.004082   0.063735   0.072867   0.065841   0.072406
#&gt; err_count 190.800000 12.498000 171.000000 199.000000 186.000000 201.000000
#&gt; f0point5    0.705107  0.027312   0.706320   0.671866   0.747161   0.694683
#&gt;           cv_5_valid
#&gt; accuracy    0.929441
#&gt; auc         0.958716
#&gt; err         0.070559
#&gt; err_count 197.000000
#&gt; f0point5    0.705505
#&gt; 
#&gt; ---
#&gt;                         mean        sd cv_1_valid cv_2_valid cv_3_valid
#&gt; precision           0.697850  0.037315   0.693009   0.658824   0.759878
#&gt; r2                  0.524626  0.025436   0.539328   0.495853   0.549358
#&gt; recall              0.738886  0.028702   0.765101   0.729642   0.700280
#&gt; residual_deviance 920.070700 56.579730 833.578200 918.379640 947.109700
#&gt; rmse                0.222662  0.006055   0.213269   0.224281   0.223051
#&gt; specificity         0.956834  0.006660   0.957652   0.952145   0.967990
#&gt;                   cv_4_valid cv_5_valid
#&gt; precision           0.686441   0.691099
#&gt; r2                  0.498373   0.540216
#&gt; recall              0.729730   0.769679
#&gt; residual_deviance 987.526700 913.759200
#&gt; rmse                0.230120   0.222589
#&gt; specificity         0.954564   0.951817</code></pre>
</div>
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1"></a><span class="fu">source</span>(<span class="st">"extract_h2o_model_name_by_position.R"</span>)</span>
<span id="cb152-2"><a href="#cb152-2"></a></span>
<span id="cb152-3"><a href="#cb152-3"></a>model <span class="ot">&lt;-</span> automl_models_h2o<span class="sc">@</span>leaderboard <span class="sc">%&gt;%</span> </span>
<span id="cb152-4"><a href="#cb152-4"></a>  <span class="fu">extract_h2o_model_name_by_position</span>(<span class="dv">6</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb152-5"><a href="#cb152-5"></a>  <span class="fu">h2o.getModel</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; GBM_4_AutoML_5_20230529_222632</code></pre>
</div>
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1"></a>model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Model Details:
#&gt; ==============
#&gt; 
#&gt; H2OBinomialModel: gbm
#&gt; Model ID:  GBM_4_AutoML_5_20230529_222632 
#&gt; Model Summary: 
#&gt;   number_of_trees number_of_internal_trees model_size_in_bytes min_depth
#&gt; 1              59                       59              117530        10
#&gt;   max_depth mean_depth min_leaves max_leaves mean_leaves
#&gt; 1        10   10.00000         66        269   153.69492
#&gt; 
#&gt; 
#&gt; H2OBinomialMetrics: gbm
#&gt; ** Reported on training data. **
#&gt; 
#&gt; MSE:  0.02428358
#&gt; RMSE:  0.1558319
#&gt; LogLoss:  0.09432899
#&gt; Mean Per-Class Error:  0.08201799
#&gt; AUC:  0.9912051
#&gt; AUCPR:  0.9519881
#&gt; Gini:  0.9824103
#&gt; R^2:  0.767757
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;           No  Yes    Error        Rate
#&gt; No     12045  124 0.010190  =124/12169
#&gt; Yes      252 1386 0.153846   =252/1638
#&gt; Totals 12297 1510 0.027233  =376/13807
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold        value idx
#&gt; 1                       max f1  0.455837     0.880559 173
#&gt; 2                       max f2  0.210072     0.897999 246
#&gt; 3                 max f0point5  0.513139     0.915172 158
#&gt; 4                 max accuracy  0.455837     0.972767 173
#&gt; 5                max precision  0.986519     1.000000   0
#&gt; 6                   max recall  0.022267     1.000000 358
#&gt; 7              max specificity  0.986519     1.000000   0
#&gt; 8             max absolute_mcc  0.455837     0.866132 173
#&gt; 9   max min_per_class_accuracy  0.195449     0.950694 252
#&gt; 10 max mean_per_class_accuracy  0.169686     0.952501 263
#&gt; 11                     max tns  0.986519 12169.000000   0
#&gt; 12                     max fns  0.986519  1635.000000   0
#&gt; 13                     max fps  0.001601 12169.000000 399
#&gt; 14                     max tps  0.022267  1638.000000 358
#&gt; 15                     max tnr  0.986519     1.000000   0
#&gt; 16                     max fnr  0.986519     0.998168   0
#&gt; 17                     max fpr  0.001601     1.000000 399
#&gt; 18                     max tpr  0.022267     1.000000 358
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; H2OBinomialMetrics: gbm
#&gt; ** Reported on validation data. **
#&gt; 
#&gt; MSE:  0.05083457
#&gt; RMSE:  0.2254652
#&gt; LogLoss:  0.1716251
#&gt; Mean Per-Class Error:  0.1603318
#&gt; AUC:  0.9505051
#&gt; AUCPR:  0.7451983
#&gt; Gini:  0.9010101
#&gt; R^2:  0.5148638
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;          No Yes    Error       Rate
#&gt; No     2022  82 0.038973   =82/2104
#&gt; Yes      80 204 0.281690    =80/284
#&gt; Totals 2102 286 0.067839  =162/2388
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold       value idx
#&gt; 1                       max f1  0.310763    0.715789 167
#&gt; 2                       max f2  0.106731    0.789312 260
#&gt; 3                 max f0point5  0.469266    0.733051 130
#&gt; 4                 max accuracy  0.329167    0.933417 162
#&gt; 5                max precision  0.977942    1.000000   0
#&gt; 6                   max recall  0.004141    1.000000 390
#&gt; 7              max specificity  0.977942    1.000000   0
#&gt; 8             max absolute_mcc  0.329167    0.677983 162
#&gt; 9   max min_per_class_accuracy  0.117798    0.890845 253
#&gt; 10 max mean_per_class_accuracy  0.106731    0.896619 260
#&gt; 11                     max tns  0.977942 2104.000000   0
#&gt; 12                     max fns  0.977942  283.000000   0
#&gt; 13                     max fps  0.001562 2104.000000 399
#&gt; 14                     max tps  0.004141  284.000000 390
#&gt; 15                     max tnr  0.977942    1.000000   0
#&gt; 16                     max fnr  0.977942    0.996479   0
#&gt; 17                     max fpr  0.001562    1.000000 399
#&gt; 18                     max tpr  0.004141    1.000000 390
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; H2OBinomialMetrics: gbm
#&gt; ** Reported on cross-validation data. **
#&gt; ** 5-fold cross-validation on training data (Metrics computed for combined holdout predictions) **
#&gt; 
#&gt; MSE:  0.05101826
#&gt; RMSE:  0.2258722
#&gt; LogLoss:  0.1726605
#&gt; Mean Per-Class Error:  0.1594387
#&gt; AUC:  0.9503779
#&gt; AUCPR:  0.7419725
#&gt; Gini:  0.9007559
#&gt; R^2:  0.5120723
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;           No  Yes    Error        Rate
#&gt; No     11654  515 0.042321  =515/12169
#&gt; Yes      453 1185 0.276557   =453/1638
#&gt; Totals 12107 1700 0.070109  =968/13807
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold        value idx
#&gt; 1                       max f1  0.335878     0.710006 200
#&gt; 2                       max f2  0.124106     0.773725 280
#&gt; 3                 max f0point5  0.568610     0.725008 131
#&gt; 4                 max accuracy  0.479121     0.931629 157
#&gt; 5                max precision  0.984883     1.000000   0
#&gt; 6                   max recall  0.005079     1.000000 390
#&gt; 7              max specificity  0.984883     1.000000   0
#&gt; 8             max absolute_mcc  0.335878     0.670296 200
#&gt; 9   max min_per_class_accuracy  0.098672     0.884296 294
#&gt; 10 max mean_per_class_accuracy  0.093678     0.886287 297
#&gt; 11                     max tns  0.984883 12169.000000   0
#&gt; 12                     max fns  0.984883  1634.000000   0
#&gt; 13                     max fps  0.001544 12169.000000 399
#&gt; 14                     max tps  0.005079  1638.000000 390
#&gt; 15                     max tnr  0.984883     1.000000   0
#&gt; 16                     max fnr  0.984883     0.997558   0
#&gt; 17                     max fpr  0.001544     1.000000 399
#&gt; 18                     max tpr  0.005079     1.000000 390
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; Cross-Validation Metrics Summary: 
#&gt;                               mean        sd cv_1_valid cv_2_valid cv_3_valid
#&gt; accuracy                  0.928876  0.006999   0.937726   0.932295   0.919232
#&gt; auc                       0.949949  0.006937   0.961131   0.951058   0.947536
#&gt; err                       0.071124  0.006999   0.062274   0.067705   0.080768
#&gt; err_count               196.400000 19.295076 172.000000 187.000000 223.000000
#&gt; f0point5                  0.695500  0.041052   0.762332   0.689862   0.651507
#&gt; f1                        0.713728  0.027004   0.759777   0.710974   0.695771
#&gt; f2                        0.733756  0.019284   0.757238   0.733418   0.746487
#&gt; lift_top_group            7.790870  0.649745   7.124206   8.675430   7.585165
#&gt; logloss                   0.173370  0.009351   0.164914   0.162399   0.184454
#&gt; max_per_class_error       0.251726  0.024930   0.244444   0.250814   0.215385
#&gt; mcc                       0.674837  0.029155   0.724019   0.673868   0.655482
#&gt; mean_per_class_accuracy   0.850732  0.010766   0.860292   0.852190   0.860904
#&gt; mean_per_class_error      0.149268  0.010766   0.139708   0.147810   0.139096
#&gt; mse                       0.051334  0.003285   0.049037   0.047526   0.055802
#&gt; pr_auc                    0.741453  0.038046   0.797196   0.752567   0.695379
#&gt; precision                 0.684212  0.050475   0.764045   0.676471   0.625000
#&gt; r2                        0.507858  0.039454   0.567392   0.518952   0.462694
#&gt; recall                    0.748274  0.024930   0.755556   0.749186   0.784615
#&gt; rmse                      0.226479  0.007232   0.221443   0.218005   0.236224
#&gt; specificity               0.953189  0.010082   0.965029   0.955193   0.937192
#&gt;                         cv_4_valid cv_5_valid
#&gt; accuracy                  0.929736   0.925389
#&gt; auc                       0.942597   0.947424
#&gt; err                       0.070264   0.074611
#&gt; err_count               194.000000 206.000000
#&gt; f0point5                  0.695831   0.677966
#&gt; f1                        0.709581   0.692537
#&gt; f2                        0.723885   0.707749
#&gt; lift_top_group            8.242703   7.326847
#&gt; logloss                   0.177222   0.177862
#&gt; max_per_class_error       0.266254   0.281734
#&gt; mcc                       0.670134   0.650683
#&gt; mean_per_class_accuracy   0.844724   0.835548
#&gt; mean_per_class_error      0.155276   0.164452
#&gt; mse                       0.051133   0.053174
#&gt; pr_auc                    0.741560   0.720562
#&gt; precision                 0.686956   0.668588
#&gt; r2                        0.505008   0.485247
#&gt; recall                    0.733746   0.718266
#&gt; rmse                      0.226126   0.230596
#&gt; specificity               0.955701   0.952830</code></pre>
</div>
</div>
<p>#5. Predictions</p>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-41_3675d2e10c153de57ade7bfa72027a80">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1"></a>predictions <span class="ot">&lt;-</span> <span class="fu">h2o.predict</span>(model, <span class="at">newdata =</span> <span class="fu">as.h2o</span>(test_tbl))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%
#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1"></a>predictions</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;   predict        No       Yes
#&gt; 1     Yes 0.5219059 0.4780941
#&gt; 2     Yes 0.4313832 0.5686168
#&gt; 3     Yes 0.5421739 0.4578261
#&gt; 4     Yes 0.4879769 0.5120231
#&gt; 5     Yes 0.3296910 0.6703090
#&gt; 6     Yes 0.6056297 0.3943703
#&gt; 
#&gt; [2858 rows x 3 columns]</code></pre>
</div>
</div>
<p>#6. Save the leader model</p>
<div class="cell" data-hash="Challenge4_cache/html/unnamed-chunk-42_386592529b7281379ab9c08719859e46">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1"></a>model <span class="sc">%&gt;%</span> <span class="fu">h2o.saveModel</span>(<span class="at">path =</span> <span class="st">"04_Modeling/h20_models/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "C:\\Users\\tiend\\Documents\\GitHub\\ss23-bdml-tiend96\\content\\01_journal\\Challenge3\\04_Modeling\\h20_models\\GBM_4_AutoML_5_20230529_222632"</code></pre>
</div>
</div>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"openEffect":"zoom","loop":true,"descPosition":"bottom","closeEffect":"zoom","selector":".lightbox"});</script>


</body></html>